<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Laurel Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Laurel Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Laurel Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Laurel Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Laurel Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">许多年前，曾是个朴素的少年</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/10/快应用vs小程序/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/10/快应用vs小程序/" itemprop="url">快应用vs小程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-10T11:58:19+08:00">
                2020-07-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="快应用-与-微信小程序的差异"><a href="#快应用-与-微信小程序的差异" class="headerlink" title="快应用 与 微信小程序的差异"></a>快应用 与 微信小程序的差异</h2><h3 id="组件差异"><a href="#组件差异" class="headerlink" title="组件差异"></a>组件差异</h3><ul>
<li><p>组件缺失</p>
<p>  小程序支持的form组件，但快应用规范目前没有该组件</p>
</li>
<li><p>属性缺失</p>
<p>  小程序的一些属性，在快应用上并不支持。如小程序的 textarea 组件支持auto-height 属性，但快应用的 textarea 组件却不支持auto-height</p>
</li>
</ul>
<h4 id="组件转换"><a href="#组件转换" class="headerlink" title="组件转换"></a>组件转换</h4><ul>
<li><p>组件属性转换</p>
<ul>
<li>组件事件属性转换</li>
<li>组件特征属性转换</li>
<li>组件公共属性转换，如hidden</li>
</ul>
</li>
<li><p>组件tag转换</p>
</li>
<li><p>组件语法支持</p>
<ul>
<li>子组件内容兼容</li>
<li>文本组件插入文本内容</li>
</ul>
</li>
<li><p>不支持的组件注释说明</p>
</li>
</ul>
<h3 id="样式差异"><a href="#样式差异" class="headerlink" title="样式差异"></a>样式差异</h3><ul>
<li>样式布局，只支持flex；</li>
<li>伪类选择器，只支持的选择器有’:disabled’, ‘:checked’, ‘:focus’, ‘:active’, ‘:visited’, ‘:autoplay’；</li>
<li>其他不支持样式等</li>
</ul>
<h4 id="样式转换"><a href="#样式转换" class="headerlink" title="样式转换"></a>样式转换</h4><ul>
<li>转换 css 选择器 selector</li>
<li>转换 css 规则 declaration</li>
<li>转换 css 样式值</li>
<li>不支持的选择器、样式规则添加注释</li>
</ul>
<h3 id="js脚本差异"><a href="#js脚本差异" class="headerlink" title="js脚本差异"></a>js脚本差异</h3><ul>
<li>vm数据更新： this.setData()、this.data.xxx = xxx</li>
<li>getApp() 小程序APP实例</li>
<li>生命周期函数</li>
<li>Page/Component 构造器</li>
<li>组件的事件参数统一 evt.detail</li>
<li>wx apis vs. 快应用api</li>
</ul>
<h4 id="apis-转换"><a href="#apis-转换" class="headerlink" title="apis 转换"></a>apis 转换</h4><p>所有的api 做polyfill <code>src/polyfill/script</code>，并将前缀改为qa.</p>
<h3 id="配置文件差异"><a href="#配置文件差异" class="headerlink" title="配置文件差异"></a>配置文件差异</h3><ul>
<li>app.json 文件 -&gt; manifest.json</li>
<li>app.js 文件 -&gt; app.ux</li>
<li>app.wxss 文件 -&gt; app.css</li>
</ul>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p><a href="https://www.npmjs.com/package/@quickapp-eco/qa-transformer" target="_blank" rel="noopener">小程序转快应用工具</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/21/require.context自动导入模块/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/21/require.context自动导入模块/" itemprop="url">require.context</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-21T10:43:54+08:00">
                2020-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate-es6/" itemprop="url" rel="index">
                    <span itemprop="name">cate-es6</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="require-context自动导入模块"><a href="#require-context自动导入模块" class="headerlink" title="require.context自动导入模块"></a>require.context自动导入模块</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>通过 require.context() 函数来创建自己的 context。</p>
<p>给这个函数传入三个参数：一个要搜索的目录，一个标记表示是否还搜索其子目录， 以及一个匹配文件的正则表达式。</p>
<p>webpack 会在构建中解析代码中的 require.context()</p>
<p><code>require.context(directory, useSubdirectories = false, regExp = /^\.\//);</code></p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// （创建出）一个 context，其中文件来自 test 目录，request 以 `.test.js` 结尾。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>.context(<span class="string">'./test'</span>, <span class="literal">false</span>, /\.test\.js$/);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* inject components 自动化导入组件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> files = <span class="built_in">require</span>.context(<span class="string">'.'</span>, <span class="literal">true</span>, /index\.vue$/)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> components = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">upperCased</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/-([a-z])/g</span>, (s, p) =&gt; p.toUpperCase()).replace(<span class="regexp">/^\S/</span>, s =&gt; s.toUpperCase());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">files.keys().forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> componentEntity = files(key).default</span><br><span class="line">    components[upperCased(componentEntity.name)] = componentEntity <span class="comment">// 读取出文件中的default模块</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> components</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/19/JS新操作符/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/19/JS新操作符/" itemprop="url">JS新操作符</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-19T19:38:29+08:00">
                2019-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1、Optional-chaining-operator-可选链操作符"><a href="#1、Optional-chaining-operator-可选链操作符" class="headerlink" title="1、Optional chaining operator(可选链操作符)"></a>1、Optional chaining operator(可选链操作符)</h3><p>可选链操作符?.能够去读取一个被连接对象的深层次的属性的值而无需明确校验链条上每一个引用的有效性。?.运算符功能类似于.运算符，不同之处在于如果链条上的一个引用是nullish (null 或 undefined)，.操作符会引起一个错误，?.操作符取而代之的是会按照短路计算的方式返回一个undefined。<br>当访问链条上可能存在的属性却不存在时，?.操作符将会使表达式更短和更简单。</p>
<p>语法：</p>
<ul>
<li>obj?.prop</li>
<li>obj?.[expr]</li>
<li>arr?.[index]</li>
<li>func?.(args)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// eg1:</span></span><br><span class="line"><span class="keyword">const</span> adventurer = &#123;</span><br><span class="line">    name: <span class="string">'zhang3'</span>,</span><br><span class="line">    cat: &#123;</span><br><span class="line">        name: <span class="string">'li4'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dogName = adventurer.dog?.name;</span><br><span class="line"><span class="built_in">console</span>.log(dogName); <span class="comment">// expected output: undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(adventurer.someNonExistentMethod?.()) <span class="comment">// expected output: undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// eg2:函数调用时如果被调用的方法不存在，使用可选链可以使表达式自动返回undefined而不是抛出一个异常。</span></span><br><span class="line"><span class="keyword">let</span> result = someInterface.customMethod?.();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// eg3: 在使用可选链时设置一个默认值</span></span><br><span class="line"><span class="keyword">let</span> customer = &#123;</span><br><span class="line">  name: <span class="string">"Carl"</span>,</span><br><span class="line">  details: &#123; <span class="attr">age</span>: <span class="number">82</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> customerCity = customer?.city ?? <span class="string">"Unknown city"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(customerCity); <span class="comment">// Unknown city</span></span><br></pre></td></tr></table></figure>

<h3 id="2、Nullish-coalescing-operator-空值合并运算符"><a href="#2、Nullish-coalescing-operator-空值合并运算符" class="headerlink" title="2、Nullish coalescing operator 空值合并运算符"></a>2、Nullish coalescing operator 空值合并运算符</h3><p>空值合并运算符（??）是一个逻辑运算符。当左侧操作数为 null 或 undefined 时，其返回右侧的表达式。否则返回左侧的操作数。</p>
<blockquote>
<p>直接与 AND（&amp;&amp;）和 OR（||）操作符组合使用 ?? 是不可取的</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="literal">null</span> ?? <span class="string">'default string'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// expected output: "default string"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baz = <span class="number">0</span> ?? <span class="number">42</span>;</span><br><span class="line"><span class="built_in">console</span>.log(baz); <span class="comment">// expected output: 0</span></span><br><span class="line"></span><br><span class="line"><span class="literal">null</span> || <span class="literal">undefined</span> ?? <span class="string">"foo"</span>; <span class="comment">// raises a SyntaxError</span></span><br><span class="line">(<span class="literal">null</span> || <span class="literal">undefined</span> ) ?? <span class="string">"foo"</span>; <span class="comment">// returns "foo"</span></span><br></pre></td></tr></table></figure>

<h3 id="3、Pipeline-operator管道操作符-gt"><a href="#3、Pipeline-operator管道操作符-gt" class="headerlink" title="3、Pipeline operator管道操作符 |&gt;"></a>3、Pipeline operator管道操作符 |&gt;</h3><p>管道操作符是单参数函数调用的语法糖.</p>
<ul>
<li>函数链式调用,使用管道操作符可以改善代码的可读性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> double = <span class="function">(<span class="params">n</span>) =&gt;</span> n * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> increment = <span class="function">(<span class="params">n</span>) =&gt;</span> n + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有用管道操作符</span></span><br><span class="line">double(increment(double(<span class="number">5</span>))); <span class="comment">// 22</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用上管道操作符之后</span></span><br><span class="line"><span class="number">5</span> |&gt; double |&gt; increment |&gt; double; <span class="comment">// 22</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>delete 操作符：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/delete</a></li>
<li>逗号操作符：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comma_Operator" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comma_Operator</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/node重装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/29/node重装/" itemprop="url">node重装&切换版本</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-29T15:46:42+08:00">
                2019-09-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="node重装遇到的问题"><a href="#node重装遇到的问题" class="headerlink" title="node重装遇到的问题"></a>node重装遇到的问题</h3><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>因业务需求，需要降级node（原先版本是12.4.3），一开始用n进行切换；</p>
<ul>
<li>npm install n -g</li>
<li>n 8.9.3（版本号）<br>但是切换版本失败（切换不回去了），后采用了nvm。</li>
</ul>
<p>n会将再装一次node、npm…在/usr/local/bin，即/usr/local/bin/node。导致每次使用nvm use 12.4.0切换后重启终端，node版本都是8.9.3。而且在8.9.3的node下找不到command n，只在12.4.0下的node才能用n命令。这也就是之前说的用n切换node版本失败==</p>
<p>删除8.9.3版本的解决方案：</p>
<ul>
<li>删除已下载的版本<ul>
<li>n prune                        Remove all downloaded versions except the installed version</li>
</ul>
</li>
<li>手动删除/usr/local/bin的以下文件（自己安装的相关文件）<ul>
<li>rm -rf /usr/local/bin/node</li>
<li>rm -rf /usr/local/bin/npm</li>
<li>rm -rf /usr/local/bin/npx</li>
<li>rm -rf /usr/local/bin/yarn</li>
<li>rm -rf /usr/local/bin/haoda-quickapp-cli</li>
</ul>
</li>
<li>手动删除/usr/local/bin/node_modules下的所有文件</li>
<li><img src="/images/20190929_node.jpg" alt="hh"></li>
</ul>
<p>卸载n：</p>
<ul>
<li>执行：npm uninstall -g n</li>
<li>手动删除：rm -rf /usr/local/n</li>
</ul>
<h4 id="！注意"><a href="#！注意" class="headerlink" title="！注意"></a>！注意</h4><ul>
<li>!!!少用sudo</li>
<li>!!!node整个管理nvm就够了</li>
</ul>
<h3 id="node切换版本、版本回退、版本升级"><a href="#node切换版本、版本回退、版本升级" class="headerlink" title="node切换版本、版本回退、版本升级"></a>node切换版本、版本回退、版本升级</h3><h4 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h4><ul>
<li>安装node版本管理模块<ul>
<li>sudo npm install n -g</li>
</ul>
</li>
<li>安装稳定版/最新版<ul>
<li>sudo n stable</li>
<li>sudo n latest</li>
</ul>
</li>
<li>版本升级/降级<ul>
<li>sudo n 版本号       （如：sudo n 8.4.0）</li>
</ul>
</li>
<li>检测安装了哪些版本的node<ul>
<li>n</li>
</ul>
</li>
<li>删除版本<ul>
<li>sudo n rm 版本号</li>
</ul>
</li>
</ul>
<h4 id="方案二（nvm）"><a href="#方案二（nvm）" class="headerlink" title="方案二（nvm）"></a>方案二（nvm）</h4><ul>
<li>检测nvm是否安装<ul>
<li>command -v nvm</li>
</ul>
</li>
<li>列出已安装实例<ul>
<li>nvm ls</li>
</ul>
</li>
<li>安装最新版node<ul>
<li>nvm install stable</li>
</ul>
</li>
<li>安装指定版本的node<ul>
<li>nvm install [node版本号]</li>
<li>如：<ul>
<li>安装4.2.2版本：nvm install 4.2.2</li>
<li>安装4.2系列的最新一个版本：nvm install 4.2</li>
</ul>
</li>
</ul>
</li>
<li>切换不同版本node<ul>
<li>nvm use [node版本号]</li>
<li>如：<ul>
<li>切换到4.2.2版本：nvm use 4.2.2</li>
<li>切换到最新的<code>4.2.x</code>：nvm use 4.2</li>
<li>切换到iojs：nvm use iojs-v3.2.0</li>
<li>切换到最新版：nvm use node</li>
</ul>
</li>
</ul>
</li>
<li>设置默认版本<ul>
<li>nvm alias default [node版本号]</li>
</ul>
</li>
<li>设置别名给不同的版本号：<ul>
<li>nvm alias awesome-version 4.2.2  -&gt; nvm use awesome-version</li>
<li>取消别名：nvm  unalias awesome-version</li>
</ul>
</li>
<li>列出远程服务器上所有的可用版本<ul>
<li>nvm ls-remote</li>
</ul>
</li>
</ul>
<h3 id="关于nvm"><a href="#关于nvm" class="headerlink" title="关于nvm"></a>关于nvm</h3><pre><code>nvm是将每个node版本的模块都会被安装在各自版本的沙箱里面。
它的安装目录是在用户文件目录里的，也就是（/Users/(yourname)/.nvm/）

当在使用某个版本时，安装的程序都运行在各自版本的沙箱里，这使得它能方便针对不同的项目运行不同的node版本，不用再修改系统所使用的node

但是如果之前已经全局安装过node，那之前安装的全局模块（grunt、gulp）就执行不了。

因为全局安装的node是存放在/usr/local/bin里的，和nvm运行的目录不一样</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/11/iframe内嵌视频网络地址/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/11/iframe内嵌视频网络地址/" itemprop="url">iframe内嵌视频网络地址</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-11T11:09:40+08:00">
                2019-09-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="iframe内嵌视频网络地址"><a href="#iframe内嵌视频网络地址" class="headerlink" title="iframe内嵌视频网络地址"></a>iframe内嵌视频网络地址</h3><h4 id="优酷视频embed"><a href="#优酷视频embed" class="headerlink" title="优酷视频embed"></a>优酷视频embed</h4><ul>
<li>视频地址：<a href="https://v.youku.com/v_show/id_XNDI1Mjc4OTg2MA==.html?spm=a2h0k.11417342.soresults.dtitle" target="_blank" rel="noopener">https://v.youku.com/v_show/id_XNDI1Mjc4OTg2MA==.html?spm=a2h0k.11417342.soresults.dtitle</a></li>
<li>视频id：XNDI1Mjc4OTg2MA==</li>
<li>iframe：<a href="http://player.youku.com/embed/XNDI1Mjc4OTg2MA==" target="_blank" rel="noopener">http://player.youku.com/embed/XNDI1Mjc4OTg2MA==</a></li>
</ul>
<h4 id="腾讯视频embed"><a href="#腾讯视频embed" class="headerlink" title="腾讯视频embed"></a>腾讯视频embed</h4><ul>
<li>视频地址：<a href="http://v.qq.com/cover/k/khyb6moudi5fha4.html?vid=d0015bg8v6k" target="_blank" rel="noopener">http://v.qq.com/cover/k/khyb6moudi5fha4.html?vid=d0015bg8v6k</a></li>
<li>视频id：d0015bg8v6k</li>
<li>iframe嵌入地址：<a href="http://v.qq.com/iframe/player.html?vid=d0015bg8v6k&amp;tiny=0&amp;auto=0" target="_blank" rel="noopener">http://v.qq.com/iframe/player.html?vid=d0015bg8v6k&amp;tiny=0&amp;auto=0</a></li>
</ul>
<h4 id="爱奇艺embed"><a href="#爱奇艺embed" class="headerlink" title="爱奇艺embed"></a>爱奇艺embed</h4><ul>
<li>视频地址：<a href="https://www.iqiyi.com/v_19run0maho.html" target="_blank" rel="noopener">https://www.iqiyi.com/v_19run0maho.html</a></li>
<li>暂无方法</li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>iframe属性：</p>
<ul>
<li>allowtransparency： iframe所加载页的背景颜色设置为tramsparent(透明)时iframe将透明化</li>
<li>allowfullscreen： 启用iframe的内容以在全屏模式下显示。如缺省，则仅iframe可以进入全屏模式</li>
<li>frameborder： 是否显示边框</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/14/配置多个SSH-Key/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/14/配置多个SSH-Key/" itemprop="url">配置多个SSH-Key</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-14T15:39:39+08:00">
                2019-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h3><p>个人的github和公司的gitlab需要配置不同的SSH-Key.这两者的邮箱如果不同，就会造成：生成第二个git的key的时候会覆盖第一个的key，导致必然有一个无法使用。</p>
<h3 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h3><ul>
<li><p>为<strong>github</strong>生成ssh key</p>
<blockquote>
<p>ssh-keygen -t rsa -C “<a href="mailto:mail@example.com" target="_blank" rel="noopener">mail@example.com</a>“ -f ~/.ssh/github_rsa</p>
</blockquote>
</li>
<li><p>为<strong>gitlab</strong>生成ssh key</p>
<blockquote>
<p>ssh-keygen -t rsa -C “<a href="mailto:mail@example.com" target="_blank" rel="noopener">mail@example.com</a>“ -f ~/.ssh/gitlab_rsa</p>
</blockquote>
</li>
<li><p>前往gitlab站添加SSH公钥(gitlab_rsa); 前往github站添加SSH公钥(github_rsa)</p>
</li>
<li><p>添加配置文件</p>
<blockquote>
<p>vim ~/.ssh/config</p>
</blockquote>
</li>
<li><p>配置文件内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># github.com</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/github_rsa</span><br><span class="line"></span><br><span class="line"># gitlab.company.com</span><br><span class="line">Host gitlab.company.com</span><br><span class="line">HostName gitlab.company.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/gitlab_rsa</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试：</p>
<blockquote>
<p>github: ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a><br>github: ssh -T <a href="mailto:git@gitlab.company.com" target="_blank" rel="noopener">git@gitlab.company.com</a></p>
</blockquote>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>添加私钥：<blockquote>
<p>ssh-add ~/.ssh/github_rsa<br>ssh-add ~/.ssh/gitlab_rsa</p>
</blockquote>
</li>
<li>确私钥列表<blockquote>
<p>ssh-add -l</p>
</blockquote>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/08/快应用开发使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/08/快应用开发使用/" itemprop="url">快应用开发使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-08T18:51:46+08:00">
                2019-08-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="快应用开发使用"><a href="#快应用开发使用" class="headerlink" title="快应用开发使用"></a>快应用开发使用</h3><h4 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h4><ol>
<li>hap init project</li>
<li>cd project</li>
<li>npm install</li>
<li>npm run server</li>
<li>npm run watch   // 热更新</li>
<li>pc预览（需提前执行hap build，生成build文件;在浏览器里打开localhost:8000）</li>
<li>支持less，安装less/less-laoder；style添加属性lang=“less”</li>
<li>使用vscode开发，可安装插件  Hap Extension</li>
</ol>
<h4 id="插件安装："><a href="#插件安装：" class="headerlink" title="插件安装："></a>插件安装：</h4><ul>
<li>Troll for UX</li>
<li>Hap Extension</li>
<li>beautify Quick App</li>
<li>QuickApp For Highlighter</li>
</ul>
<h4 id="样式注意："><a href="#样式注意：" class="headerlink" title="样式注意："></a>样式注意：</h4><ul>
<li>文字样式需设置在文本标签上 （如：color，font-size）</li>
<li>并列样式避免嵌套.main{&amp;.selector{}}<ul>
<li>使用并列：// .main {} .selector{}</li>
</ul>
</li>
<li>叠加样式<ul>
<li>错误使用： border-bottom: 1px solid #ccc;</li>
<li>正确使用:<br>  border-style: solid;<br>  border-bottom-color: #eaeefb;<br>  border-bottom-width: 1px;</li>
</ul>
</li>
</ul>
<h4 id="暂不支持的样式："><a href="#暂不支持的样式：" class="headerlink" title="暂不支持的样式："></a>暂不支持的样式：</h4><ul>
<li>white-space</li>
<li>outline</li>
<li>overflow-x/overflow-y</li>
<li>clear</li>
<li>display不支持block和inline-block</li>
<li>user-select</li>
<li>vertical-align</li>
<li>伪类 :after</li>
<li>image 标签设置object-fit样式不生效</li>
</ul>
<h4 id="问题-amp-解决"><a href="#问题-amp-解决" class="headerlink" title="问题&amp;解决:"></a>问题&amp;解决:</h4><ul>
<li>第一次执行build可能会遇到报错，解决：<ul>
<li>执行一次 hap update –force 即可解决, 再执行npm run build进行编译。</li>
</ul>
</li>
<li>普通容器不支持横向滚动<ul>
<li>没有overflow的属性，只能通过tabs来hack。</li>
<li>或者 list 组件实现横向滚动，并且 flex-direction: row;</li>
</ul>
</li>
<li>动画不支持transition，只能通过animation来实现。</li>
<li>absolute不支持，可以采用stack组件hack</li>
<li>在页面组件中可以通过this.$app和this.$app.$def这两个对象调用挂载到app.ux里的属性。但是注意：</li>
</ul>
<p>app.ux中挂载的所有属性在this.$app.$def中都能获取到。但是只有方法属性会挂载到this.$app上。</p>
<ul>
<li><p>js设置网络背景图用法：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    backgroundImage: <span class="keyword">this</span>.lotteryProp.cover</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问子组件</p>
<ul>
<li>this.$child(‘id’)</li>
<li>用于访问当前页面内使用的自定义组件</li>
</ul>
</li>
<li><p>访问父组件</p>
<ul>
<li>this.$parent()</li>
</ul>
</li>
<li><p>访问带有id的组件</p>
<ul>
<li>this.$element()</li>
<li>获取指定 id 的组件 dom 对象，不能获取子组件</li>
</ul>
</li>
<li><p>computed 里可以访问 this.$app 全局属性，data选项里不可以访问全局属性</p>
</li>
<li><p>页面回退，不刷新页面， 只是回退</p>
</li>
<li><p>不能动态设置背景渐变色</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    bgStyle: &#123;</span><br><span class="line">        background: <span class="string">'linear-gradient(to right bottom,rgb(255, 0, 0), rgb(0, 0, 255))'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>show 属性值必须为Boolean类型，否则不生效。</p>
<ul>
<li><p>比如，下面的dom会渲染节点 【undefined】</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">show</span>=<span class="string">"&#123;&#123; leaf.name &#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"tab-content__header"</span>&gt;</span>&#123;&#123; leaf.name &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>改成这样的就不会渲染出来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">show</span>=<span class="string">"&#123;&#123; !!leaf.name &#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"tab-content__header"</span>&gt;</span>&#123;&#123; leaf.name &#125;&#125; hhh<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>用canvas绘制图片（new Image() 在 canvas.getContext(‘2d’)之前调用）</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">drawCanvas() &#123;</span><br><span class="line">    <span class="keyword">const</span> canvas = <span class="keyword">this</span>.$element(<span class="string">'canvasid'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> img = <span class="keyword">new</span> Image() <span class="comment">// new Image() 在 canvas.getContext('2d')之前调用</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'img'</span>, img)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// img.src = 'https://www.quickapp.cn/assets/images/home/logo.png'</span></span><br><span class="line">    img.src = <span class="string">'/Common/images/840.jpeg'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载成功的回调</span></span><br><span class="line">    img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'图片加载完成'</span>)</span><br><span class="line">        ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载失败的回调</span></span><br><span class="line">    img.onerror = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'图片加载失败'</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>签名文件生成</p>
<ul>
<li>命令行：<code>openssl req -newkey rsa:2048 -nodes -keyout private.pem -x509 -days 3650 -out certificate.pem</code></li>
<li>回车，随意输入内容即可</li>
<li>sign 目录下创建 release 目录，将私钥文件 private.pem 和证书文件 certificate.pem 拷贝进去</li>
</ul>
</li>
</ul>
<h4 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h4><ul>
<li>promise 化快应用小程序</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * promise 化快应用小程序</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; actions</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; option</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> prompt = <span class="built_in">require</span>(<span class="string">'@system.prompt'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'@system.router'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> media = <span class="built_in">require</span>(<span class="string">'@system.media'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">'@system.request'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> image = <span class="built_in">require</span>(<span class="string">'@system.image'</span>);</span><br><span class="line"><span class="keyword">const</span> Native = &#123; <span class="comment">// 自行添加项目里所需要的接口</span></span><br><span class="line">    prompt,</span><br><span class="line">    router,</span><br><span class="line">    request,</span><br><span class="line">    media,</span><br><span class="line">    image</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nativeApi</span>(<span class="params">actions, option</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [action, name] = actions.split(<span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> </span><br><span class="line">    Native[action][name](<span class="built_in">Object</span>.assign(&#123;&#125;, option, &#123;</span><br><span class="line">      success: resolve, <span class="attr">fail</span>: reject</span><br><span class="line">    &#125;))</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/22/Code-Snippet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/22/Code-Snippet/" itemprop="url">Code-Snippet</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-22T10:47:32+08:00">
                2019-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/interview/" itemprop="url" rel="index">
                    <span itemprop="name">interview</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Agenda"><a href="#Agenda" class="headerlink" title="Agenda"></a>Agenda</h3><ul>
<li>实现Promise</li>
<li>实现promiseAll</li>
<li>实现bind</li>
<li>实现数据劫持</li>
<li>最大公共子串</li>
</ul>
<h3 id="实现Promise"><a href="#实现Promise" class="headerlink" title="实现Promise"></a>实现Promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 三种状态</span></span><br><span class="line"><span class="keyword">const</span> PENDING = <span class="string">'pending'</span>;</span><br><span class="line"><span class="keyword">const</span> RESOLVED = <span class="string">'resolved'</span>;</span><br><span class="line"><span class="keyword">const</span> REJECTED = <span class="string">'rejected'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    _this.currentState = PENDING;</span><br><span class="line">    _this.value = <span class="literal">undefined</span>;</span><br><span class="line">    _this.resolvedCallbacks = [];</span><br><span class="line">    _this.rejectedCallbacks = [];</span><br><span class="line"></span><br><span class="line">    _this.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (_this.currentState === PENDING) &#123;</span><br><span class="line">                _this.currentState = RESOLVED;</span><br><span class="line">                _this.value = value;</span><br><span class="line">                _this.resolvedCallbacks.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> cb());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    _this.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (_this.currentState === PENDING) &#123;</span><br><span class="line">                _this.currentState = REJECTED;</span><br><span class="line">                _this.value = reason;</span><br><span class="line">                _this.rejectedCallbacks.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> cb());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        fn(_this.resolve, _this.reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        _this.reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">MyPromise.prototype.then = <span class="function"><span class="keyword">function</span> (<span class="params">onFullfilled,onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">switch</span>(_this.status) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"pending"</span>:</span><br><span class="line">            _this.onFullfilledArray.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                onFullfilled(_this.value)</span><br><span class="line">            &#125;);</span><br><span class="line">            _this.onRejectedArray.push(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                onRejected(_this.reason)</span><br><span class="line">            &#125;);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'resolved'</span>:</span><br><span class="line">            onFullfilled(_this.value);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'rejected'</span>:</span><br><span class="line">            onRejected(_this.reason);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现promiseAll"><a href="#实现promiseAll" class="headerlink" title="实现promiseAll"></a>实现promiseAll</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promiseAll</span>(<span class="params">promises</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(promises)) &#123;</span><br><span class="line">            <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'argument must be array'</span>))</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> countNum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> promiseLength = promises.length;</span><br><span class="line">        <span class="keyword">var</span> resolvedvalue = <span class="keyword">new</span> <span class="built_in">Array</span>(promiseNum);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promises; i++) &#123;</span><br><span class="line">            <span class="built_in">Promise</span>.resolve(promise[i]).then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">                countNum++;</span><br><span class="line">                resolvedvalue[i] = value;</span><br><span class="line">                <span class="keyword">if</span> (countNum === promiseNum) &#123;</span><br><span class="line">                    <span class="keyword">return</span> resolve(resolvedvalue)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> reject(reason);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现bind"><a href="#实现bind" class="headerlink" title="实现bind"></a>实现bind</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">var</span> bound = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    arg = args.concat(...arguments);</span><br><span class="line">    <span class="keyword">return</span> _this.apply(context, arg);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 寄生式继承</span></span><br><span class="line">  F.prototype = _this.prototype;</span><br><span class="line">  bound.prototype = <span class="keyword">new</span> F();</span><br><span class="line">  <span class="keyword">return</span> bound;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据劫持"><a href="#数据劫持" class="headerlink" title="数据劫持"></a>数据劫持</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过Object.defineProperty对具体实例中的data实现代理，在get里面实现依赖收集，(每个数据都被生成一个Watcher实例，推进到Dep实例中)都推到一个Dep实例的subs数组里面，并将具体data里面的数据打上标记，表示是要实现响应式的数据;在set里面实现回调，当数据值发生变化的时候，Dep的notify方法会被调用，notice方法中会调用Watcher类的update方法，对具体数据进行更新操作，并调用render方法，将dom局部进行重新渲染更新</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue内部使用Object.defineProperty()来实现双向绑定，通过这个函数可以监听到set和 get的事件</span></span><br><span class="line"><span class="comment">// 实现一个简易的双向绑定，核心思路就是手动触发一次属性的 getter 来实现发布订阅的添加。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        defineReactive(obj, key, obj[key]);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 递归子属性</span></span><br><span class="line">    observe(val)</span><br><span class="line">    <span class="keyword">let</span> dp = <span class="keyword">new</span> Dep()</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">        enumerable: <span class="literal">true</span>,</span><br><span class="line">        configurable: <span class="literal">true</span>,</span><br><span class="line">        <span class="keyword">get</span>: function reactiveGetter() &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'get value'</span>);</span><br><span class="line">            <span class="comment">// 将Watcher添加到订阅</span></span><br><span class="line">            <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">                dp.addSub(Dep.target)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">set</span>: function reactiveSetter(newValue) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'set value'</span>);</span><br><span class="line">            val = newValue</span><br><span class="line">            <span class="comment">// 执行 watcher 的 update 方法</span></span><br><span class="line">            dp.notify()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过Dep解耦</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.subs = []</span><br><span class="line">    &#125;</span><br><span class="line">    addSub(sub) &#123; <span class="comment">// 依赖收集,推到Dep实例的subs数组里面</span></span><br><span class="line">        <span class="comment">// sub是Watcher实例</span></span><br><span class="line">        <span class="keyword">this</span>.subs.push(sub)</span><br><span class="line">    &#125;</span><br><span class="line">    notify() &#123;</span><br><span class="line">        <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="params">sub</span> =&gt;</span> sub.update())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 全局属性，通过该属性配置Watcher</span></span><br><span class="line">Dep.target = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(obj, key, cb) &#123;</span><br><span class="line">        Dep.target = <span class="keyword">this</span> <span class="comment">// 将Dep.target指向自己</span></span><br><span class="line">        <span class="keyword">this</span>.cb = cb</span><br><span class="line">        <span class="keyword">this</span>.obj = obj</span><br><span class="line">        <span class="keyword">this</span>.key = key</span><br><span class="line">        <span class="keyword">this</span>.value = obj[key] <span class="comment">// 然后触发属性的getter添加监听</span></span><br><span class="line">        Dep.target = <span class="literal">null</span> <span class="comment">// 最后将Dep.target置空</span></span><br><span class="line">    &#125;</span><br><span class="line">    update() &#123;</span><br><span class="line">        <span class="comment">// 获得新值</span></span><br><span class="line">        <span class="keyword">this</span>.value = <span class="keyword">this</span>.obj[<span class="keyword">this</span>.key]</span><br><span class="line">        <span class="comment">// 调用update方法更新Dom</span></span><br><span class="line">        <span class="keyword">this</span>.cb(<span class="keyword">this</span>.value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// call</span></span><br><span class="line"><span class="keyword">var</span> data = &#123; <span class="attr">name</span>: <span class="string">'yck'</span> &#125;</span><br><span class="line">observe(data)</span><br><span class="line"><span class="keyword">new</span> Watcher(data, <span class="string">'name'</span>, update) <span class="comment">// data数据生成一个Watcher实例</span></span><br><span class="line">data.name = <span class="string">'yyy'</span></span><br></pre></td></tr></table></figure>

<h3 id="JS-实现DOM对象"><a href="#JS-实现DOM对象" class="headerlink" title="JS 实现DOM对象"></a>JS 实现DOM对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Element</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(tag, props, children, key) &#123;</span><br><span class="line">        <span class="keyword">this</span>.tag = tag</span><br><span class="line">        <span class="keyword">this</span>.props = props</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(children)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.children = children <span class="comment">// 给每个节点一个标识，作为判断是同一个节点的依据</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isString(children)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = chidlren</span><br><span class="line">            <span class="keyword">this</span>.chidlren = <span class="literal">null</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (key) <span class="keyword">this</span>.key = key</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 渲染</span></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">let</span> root = <span class="keyword">this</span>._createElement(</span><br><span class="line">            <span class="keyword">this</span>.tag,</span><br><span class="line">            <span class="keyword">this</span>.props,</span><br><span class="line">            <span class="keyword">this</span>.children,</span><br><span class="line">            <span class="keyword">this</span>.key</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(root)</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    &#125;</span><br><span class="line">    create() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._createElement(<span class="keyword">this</span>.tag, <span class="keyword">this</span>.props, <span class="keyword">this</span>.children, <span class="keyword">this</span>.key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建节点</span></span><br><span class="line">    _createElement(tag, props, child, key) &#123;</span><br><span class="line">        <span class="comment">// 通过tag创建节点</span></span><br><span class="line">        <span class="keyword">let</span> el = <span class="built_in">document</span>.createElement(tag)</span><br><span class="line">        <span class="comment">// 设置节点属性</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> props) &#123;</span><br><span class="line">            <span class="keyword">if</span> (props.hasOwnProperty(key)) &#123;</span><br><span class="line">                <span class="keyword">const</span> value = props[key]</span><br><span class="line">                el.setAttribute(key, value)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (key) &#123;</span><br><span class="line">            el.setAttribute(<span class="string">'key'</span>, key)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 递归添加子节点</span></span><br><span class="line">        <span class="keyword">if</span> (child) &#123;</span><br><span class="line">            child.forEach(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> child</span><br><span class="line">                <span class="keyword">if</span> (ele <span class="keyword">instanceof</span> Element) &#123;</span><br><span class="line">                    child = <span class="keyword">this</span>._createElement(</span><br><span class="line">                        ele.tag,</span><br><span class="line">                        ele.props,</span><br><span class="line">                        ele.children,</span><br><span class="line">                        ele.key</span><br><span class="line">                    )</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123; <span class="comment">// 文本节点</span></span><br><span class="line">                    child = <span class="built_in">document</span>.createTextNode(ele)</span><br><span class="line">                &#125;</span><br><span class="line">                el.appendChild(child)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> el</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="最大公共子串"><a href="#最大公共子串" class="headerlink" title="最大公共子串"></a>最大公共子串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findSubStr</span>(<span class="params">str1, str2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (str1.length &gt; str2.length) &#123;</span><br><span class="line">      <span class="keyword">var</span> temp = str1;</span><br><span class="line">      str1 = str2;</span><br><span class="line">      str2 = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> len1 = str1.length,</span><br><span class="line">      len2 = str2.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = len1; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len2 - j; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> current = str1.substr(i, j);</span><br><span class="line">        <span class="keyword">if</span> (str2.indexOf(current) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> current;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/JS编码规范/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/16/JS编码规范/" itemprop="url">JS编码规范</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-16T11:10:54+08:00">
                2019-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://gitlab.baidu.com/fe/spec/blob/master/javascript.md" target="_blank" rel="noopener">http://gitlab.baidu.com/fe/spec/blob/master/javascript.md</a></p>
<h2 id="JavaScript编码规范"><a href="#JavaScript编码规范" class="headerlink" title="JavaScript编码规范"></a>JavaScript编码规范</h2><h3 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h3><h4 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. JavaScript 文件使用无 BOM 的 UTF-8 编码。</span><br><span class="line"></span><br><span class="line">2. 在文件结尾处，保留一个空行</span><br></pre></td></tr></table></figure>

<h4 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h4><ol>
<li>缩进<ul>
<li>使用 4 个空格做为一个缩进层级，不允许使用 2 个空格 或 tab 字符。</li>
<li>switch 下的 case 和 default 必须增加一个缩进层级。</li>
</ul>
</li>
<li>空格<ul>
<li>二元运算符两侧必须有一个空格，一元运算符与操作对象之间不允许有空格。</li>
<li>用作代码块起始的左花括号 { 前必须有一个空格。</li>
<li>if / else / for / while / function / switch / do / try / catch / finally 关键字后，必须有一个空格</li>
<li>在对象创建时，属性中的 : 之后必须有空格，: 之前不允许有空格。</li>
<li>函数声明、具名函数表达式、函数调用中，函数名和 ( 之间不允许有空格。</li>
<li>, 和 ; 前不允许有空格。如果不位于行尾，, 和 ; 后必须跟一个空格。</li>
<li>在函数调用、函数声明、括号表达式、属性访问、if / for / while / switch / catch 等语句中，() 和 [] 内紧贴括号部分不允许有空格。</li>
<li>单行声明的数组与对象，如果包含元素，{} 和 [] 内紧贴括号部分不允许包含空格。</li>
</ul>
</li>
<li>换行<ul>
<li>每个独立语句结束后必须换行。</li>
<li>每行不得超过 120 个字符。</li>
<li>运算符处换行时，运算符必须在新行的行首。</li>
<li>在函数声明、函数表达式、函数调用、对象创建、数组创建、for 语句等场景中，不允许在 , 或 ; 前换行。</li>
<li>不同行为或逻辑的语句集，使用空行隔开，更易阅读。</li>
<li>在语句的行长度超过 120 时，根据逻辑条件合理缩进。</li>
<li>对于 if…else…、try…catch…finally 等语句，推荐使用在 } 号后添加一个换行 的风格，使代码层次结构更清晰，阅读性更好。</li>
</ul>
</li>
<li>语句<ul>
<li>不得省略语句结束的分号</li>
<li>在 if / else / for / do / while 语句中，即使只有一行，也不得省略块 {…}。</li>
<li>函数定义结束不允许添加分号。</li>
<li>IIFE 必须在函数表达式外添加 (，非 IIFE 不得在函数表达式外添加 (。<ul>
<li>IIFE = Immediately-Invoked Function Expression.</li>
<li>额外的 ( 能够让代码在阅读的一开始就能判断函数是否立即被调用，进而明白接下来代码的用途。而不是一直拖到底部才恍然大悟。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h4><ul>
<li><p>变量 使用 Camel命名法。如：var HTML_ENTITY = {};</p>
</li>
<li><p>常量 使用 全部字母大写，单词间下划线分隔 的命名方式。如：var HTML_ENTITY = {};</p>
</li>
<li><p>函数 使用 Camel命名法。如：function stringFormat(source) { … }</p>
</li>
<li><p>函数的 参数 使用 Camel命名法。</p>
</li>
<li><p>类 使用 Pascal命名法。function TextNode(options) {…}</p>
</li>
<li><p>类的 方法 / 属性 使用 Camel命名法。</p>
</li>
<li><p>枚举变量 使用 Pascal命名法，枚举的属性 使用 全部字母大写，单词间下划线分隔 的命名方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var TargetState = &#123;</span><br><span class="line">    READING: 1,</span><br><span class="line">    READED: 2,</span><br><span class="line">    APPLIED: 3,</span><br><span class="line">    READY: 4</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>命名空间 使用 Camel命名法。</p>
</li>
<li><p>由多个单词组成的缩写词，在命名中，根据当前命名法和出现的位置，所有字母的大小写与首字母的大小写保持一致。</p>
</li>
<li><p>类名使用名词</p>
</li>
<li><p>函数名使用动宾短语</p>
</li>
<li><p>boolean类型的变量使用is或has开头</p>
</li>
<li><p>Promise对象用动宾短语的进行时表达</p>
</li>
</ul>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><ol>
<li><p>单行注释：</p>
<p>必须独占一行。// 后跟一个空格，缩进与下一行被注释说明的代码一致。</p>
</li>
<li><p>多行注释：</p>
<p>避免使用 /<em>…</em>/ 这样的多行注释。有多行注释内容时，使用多个单行注释。</p>
</li>
<li><p>文档化注释</p>
<ul>
<li>为了便于代码阅读和自文档化，以下内容必须包含以 /<em>*…</em>/ 形式的块注释中。<ul>
<li>文件</li>
<li>namespace</li>
<li>类</li>
<li>函数或方法</li>
<li>类属性</li>
<li>事件</li>
<li>全局变量</li>
<li>常量</li>
<li>AMD 模块</li>
</ul>
</li>
<li>文档注释前必须空一行。</li>
<li>自文档化的文档说明 what，而不是 how。</li>
</ul>
</li>
<li><p>类型定义</p>
<ul>
<li>类型定义都是以 { 开始, 以 } 结束。<ul>
<li>常用类型如：{string}, {number}, {boolean}, {Object}, {Function}, {RegExp}, {Array}, {Date}。</li>
<li>类型不仅局限于内置的类型，也可以是自定义的类型。比如定义了一个类 Developer，就可以使用它来定义一个参数和返回值的类型。<ul>
<li>String {string} –</li>
<li>单一类型集合 {Array.} string 类型的数组</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>文件注释</p>
<ul>
<li><p>文件顶部必须包含文件注释，用 @file 标识文件说明。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @file Describe the file</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件注释中可以用 @author 标识开发者信息。</p>
</li>
</ul>
</li>
<li><p>命名空间注释</p>
<ul>
<li><p>命名空间使用 @namespace 标识。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @namespace</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>类注释</p>
<ul>
<li>使用 @class 标记类或构造函数。<ul>
<li>对于使用对象 constructor 属性来定义的构造函数，可以使用 @constructor 来标记。</li>
</ul>
</li>
<li>使用 @extends 标记类的继承信息。</li>
<li>使用包装方式扩展类成员时， 必须通过 @lends 进行重新指向。</li>
<li>类的属性或方法等成员信息不是 public 的，应使用 @protected 或 @private 标识可访问性。</li>
</ul>
</li>
<li><p>函数/方法注释</p>
<ul>
<li>函数/方法注释必须包含函数说明，有参数和返回值时必须使用注释标识。</li>
<li>参数和返回值注释必须包含类型信息，且不允许省略参数的说明。</li>
<li>当函数是内部函数，外部不可访问时，可以使用 @inner 标识。</li>
<li>对 Object 中各项的描述， 必须使用 @param 标识。</li>
<li>重写父类方法时， 应当添加 @override 标识。如果重写的形参个数、类型、顺序和返回值类型均未发生变化，可省略 @param、@return，仅用 @override 标识，否则仍应作完整注释。<ul>
<li>当子类重写的方法能直接套用父类的方法注释时可省略对参数与返回值的注释。</li>
</ul>
</li>
</ul>
</li>
<li><p>事件注释</p>
<ul>
<li>必须使用 @event 标识事件，事件参数的标识与方法描述的参数标识相同。</li>
<li>在会广播事件的函数前使用 @fires 标识广播的事件，在广播事件代码前使用 @event 标识事件。</li>
<li>对于事件对象的注释，使用 @param 标识，生成文档时可读性更好。</li>
</ul>
</li>
<li><p>常量注释</p>
<ul>
<li>常量必须使用 @const 标识，并包含说明和类型信息</li>
</ul>
</li>
<li><p>复杂类型注释</p>
<ul>
<li>对于类型未定义的复杂结构的注释，可以使用 @typedef 标识来定义。</li>
</ul>
</li>
<li><p>AMD 模块注释</p>
<ul>
<li>AMD 模块使用 @module 或 @exports 标识。<ul>
<li>@exports 与 @module 都可以用来标识模块，区别在于 @module 可以省略模块名称。而只使用 @exports 时在 namepaths 中可以省略 module: 前缀。</li>
</ul>
</li>
<li>对于已使用 @module 标识为 AMD模块 的引用，在 namepaths 中必须增加 module: 作前缀。</li>
<li>对于类定义的模块，可以使用 @alias 标识构建函数。</li>
<li>多模块定义时，可以使用 @exports 标识各个模块。</li>
<li>对于 exports 为 Object 的模块，可以使用@namespace标识。</li>
<li>对于 exports 为类名的模块，使用 @class 和 @exports 标识。</li>
</ul>
</li>
<li><p>细节注释</p>
<ul>
<li>细节注释遵循单行注释的格式。说明必须换行时，每行是一个单行注释的起始。</li>
<li>有时我们会使用一些特殊标记进行说明。特殊标记必须使用单行注释的形式。下面列举了一些常用标记：<ol>
<li>TODO: 有功能待实现。此时需要对将要实现的功能进行简单说明。</li>
<li>FIXME: 该处代码运行没问题，但可能由于时间赶或者其他原因，需要修正。此时需要对如何修正进行简单说明。</li>
<li>HACK: 为修正某些问题而写的不太好或者使用了某些诡异手段的代码。此时需要对思路或诡异手段进行描述。</li>
<li>XXX: 该处存在陷阱。此时需要对陷阱进行描述。</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="语言特性"><a href="#语言特性" class="headerlink" title="语言特性"></a>语言特性</h3><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 变量、函数在使用前必须先定义。</span><br><span class="line"></span><br><span class="line">    - 原则上不建议使用全局变量，对于已有的全局变量或第三方框架引入的全局变量，需要根据检查工具的语法标识。</span><br><span class="line"></span><br><span class="line">    - 不通过 var 定义变量将导致变量污染全局环境。</span><br><span class="line"></span><br><span class="line">2. 每个 var 只能声明一个变量。</span><br><span class="line"></span><br><span class="line">3. 变量必须 即用即声明，不得在函数或其它形式的代码块起始位置统一声明所有变量。</span><br></pre></td></tr></table></figure>

<h4 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h4><ol>
<li>在 Equality Expression 中使用类型严格的 ===。仅当判断 null 或 undefined 时，允许使用 == null<ul>
<li>使用 === 可以避免等于判断中隐式的类型转换。</li>
</ul>
</li>
<li>尽可能使用简洁的表达式。如：if (!name){} 优于 if (name === ‘’){}</li>
<li>按执行频率排列分支的顺序。<ul>
<li>按执行频率排列分支的顺序好处是：<ul>
<li>阅读的人容易找到最常见的情况，增加可读性。</li>
<li>提高执行效率。</li>
</ul>
</li>
</ul>
</li>
<li>对于相同变量或表达式的多值条件，用 switch 代替 if。</li>
<li>如果函数或全局中的 else 块后没有任何语句，可以删除 else。</li>
</ol>
<h4 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h4><ol>
<li><p>不要在循环体中包含函数表达式，事先将函数提取到循环体外。</p>
<ul>
<li><p>循环体中的函数表达式，运行过程中会生成循环次数个函数对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clicker</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> element = elements[i];</span><br><span class="line">    addListener(element, <span class="string">'click'</span>, clicker);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = elements.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> element = elements[i];</span><br><span class="line">    addListener(element, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>对循环内多次使用的不变值，在循环外用变量缓存。</p>
</li>
<li><p>对有序集合进行遍历时，缓存 length。</p>
<ul>
<li>虽然现代浏览器都对数组长度进行了缓存，但对于一些宿主对象和老旧浏览器的数组对象，在每次 length 访问时会动态计算元素个数，此时缓存 length 能有效提高程序性能。</li>
</ul>
</li>
<li><p>对有序集合进行顺序无关的遍历时，使用逆序遍历。</p>
<ul>
<li><p>逆序遍历可以节省变量，代码比较优化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">var</span> len = elements.length;</span><br><span class="line"><span class="keyword">while</span> (len--) &#123;</span><br><span class="line">    <span class="keyword">var</span> element = elements[len];</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4><ol>
<li>类型检测<ul>
<li>类型检测优先使用 typeof。对象类型检测使用 instanceof。null 或 undefined 的检测使用 == null。</li>
</ul>
</li>
<li>类型转换<ul>
<li>转换成 string 时，使用 + ‘’。</li>
<li>转换成 number 时，通常使用 +。</li>
<li>string 转换成 number，要转换的字符串结尾包含非数字并期望忽略时，使用 parseInt。<ul>
<li>PS: var width = ‘200px’; parseInt(width, 10);</li>
</ul>
</li>
<li>使用 parseInt 时，必须指定进制。</li>
<li>转换成 boolean 时，使用 !!。</li>
<li>number 去除小数点，使用 Math.floor / Math.round / Math.ceil，不使用 parseInt。</li>
</ul>
</li>
</ol>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><ul>
<li><p>字符串开头和结束使用单引号 ‘。</p>
<ul>
<li>输入单引号不需要按住 shift，方便输入。</li>
<li>实际使用中，字符串经常用来拼接 HTML。为方便 HTML 中包含双引号而不需要转义写法。</li>
</ul>
</li>
<li><p>使用 数组 或 + 拼接字符串。</p>
</li>
<li><p>使用字符串拼接的方式生成HTML，需要根据语境进行合理的转义。</p>
<ul>
<li>在 JavaScript 中拼接，并且最终将输出到页面中的字符串，需要进行合理转义，以防止安全漏洞。</li>
</ul>
</li>
<li><p>复杂的数据到视图字符串的转换过程，选用一种模板引擎。</p>
<p>使用模板引擎有如下好处：</p>
<ul>
<li>在开发过程中专注于数据，将视图生成的过程由另外一个层级维护，使程序逻辑结构更清晰。</li>
<li>优秀的模板引擎，通过模板编译技术和高质量的编译产物，能获得比手工拼接字符串更高的性能。</li>
<li>模板引擎能方便的对动态数据进行相应的转义，部分模板引擎默认进行HTML转义，安全性更好。</li>
</ul>
<ol>
<li>artTemplate: 体积较小，在所有环境下性能高，语法灵活。</li>
<li>dot.js: 体积小，在现代浏览器下性能高，语法灵活。</li>
<li>etpl: 体积较小，在所有环境下性能高，模板复用性高，语法灵活。</li>
<li>handlebars: 体积大，在所有环境下性能高，扩展性高。</li>
<li>hogon: 体积小，在现代浏览器下性能高。</li>
<li>nunjucks: 体积较大，性能一般，模板复用性高。</li>
</ol>
</li>
</ul>
<h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><ul>
<li><p>使用对象字面量 {} 创建新 Object。</p>
</li>
<li><p>对象创建时，如果一个对象的所有 属性 均可以不添加引号，建议所有 属性 不添加引号。</p>
</li>
<li><p>对象创建时，如果任何一个 属性 需要添加引号，则所有 属性 建议添加 ‘。</p>
<ul>
<li>如果属性不符合 Identifier 和 NumberLiteral 的形式，就需要以 StringLiteral 的形式提供。</li>
</ul>
</li>
<li><p>不允许修改和扩展任何原生对象和宿主对象的原型。</p>
</li>
<li><p>属性访问时，尽量使用 .。</p>
<ul>
<li>属性名符合 Identifier 的要求，就可以通过 . 来访问，否则就只能通过 [expr] 方式访问。</li>
</ul>
</li>
<li><p>for in 遍历对象时, 使用 hasOwnProperty 过滤掉原型中的属性。</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newInfo = &#123;&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> info) &#123;</span><br><span class="line">    <span class="keyword">if</span> (info.hasOwnProperty(key)) &#123;</span><br><span class="line">        newInfo[key] = info[key];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul>
<li>使用数组字面量 [] 创建新数组，除非想要创建的是指定长度的数组。</li>
<li>遍历数组不使用 for in。<ul>
<li>数组对象可能存在数字意外的属性，这种情况下for in 不会得到正确的结果</li>
</ul>
</li>
<li>不因为性能的原因自己实现数组排序功能，尽量使用数组的sort方法<ul>
<li>自己实现的常规排序算法，在性能上并不优于数组默认的sort方法。以下场景可以自己实现排序:<ol>
<li>需要稳定的排序算法，达到严格一致的排序结果。</li>
<li>数据特点鲜明，适合使用桶排。</li>
</ol>
</li>
</ul>
</li>
<li>清空数组使用 .length = 0。</li>
</ul>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><ol>
<li>函数长度<ul>
<li>一个函数的长度控制在50行以内<ul>
<li>将过多的逻辑单元混在一个大函数中，易导致难以维护。一个清晰易懂的函数应该完成单一的逻辑单元。复杂的操作应进一步抽取，通过函数的调用来体现流程。</li>
<li>特定算法等不可分割的逻辑允许例外。</li>
</ul>
</li>
</ul>
</li>
<li>参数设计<ul>
<li>一个函数的参数控制在 6 个以内。<ul>
<li>除去不定长参数以外，函数具备不同逻辑意义的参数建议控制在 6 个以内，过多参数会导致维护难度增大。</li>
<li>某些情况下，如使用 AMD Loader 的 require 加载多个模块时，其 callback 可能会存在较多参数，因此对函数参数的个数不做强制限制。</li>
</ul>
</li>
<li>通过 options 参数传递非数据输入型参数。<ul>
<li>有些函数的参数并不是作为算法的输入，而是对算法的某些分支条件判断之用，此类参数建议通过一个 options 参数传递。</li>
</ul>
</li>
</ul>
</li>
<li>闭包<ul>
<li>在适当的时候将闭包内大对象置为 null。<ul>
<li>在JS中，无需特别的关键词就可以使用闭包，一个函数可以任意访问在其定义的作用于外的变量。需要注意的是，函数的作用域是静态的，即在定义时决定，与调用的时机和方式没有任何关系。</li>
<li>闭包会阻止一些变量的垃圾回收，对于较老旧的 JavaScript 引擎，可能导致外部所有变量均无法回收。</li>
<li>首先一个较为明确的结论是，以下内容会影响到闭包内变量的回收：<ul>
<li>嵌套的函数中是否有使用该变量。</li>
<li>嵌套的函数中是否有 直接调用eval。</li>
<li>是否使用了 with 表达式。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>空函数<ul>
<li>空函数不使用 new Function() 的形式。</li>
<li>对于性能有高要求的场合，建议存在一个空函数的常量，供多处使用共享。</li>
</ul>
</li>
</ol>
<h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><ul>
<li>类的继承方案，实现时需要修正 constructor。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">构建类之间的继承关系</span><br><span class="line">*/</span><br><span class="line">function inherits(subClass, superClass) &#123;</span><br><span class="line">    var F = new Function();</span><br><span class="line">    F.prototype = superClass.prototype;</span><br><span class="line">    subClass.prototype = new F();</span><br><span class="line">    subClass.prototype.constructor = subClass;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>声明类时，保证constructor的正确性</li>
<li>属性在构造函数中声明，方法在原型中声明。<ul>
<li>原型对象的成员被所有实例共享，能节约内存占用。所以编码时我们应该遵守这样的原则：原型对象包含程序不会修改的成员，如方法函数或配置项。</li>
</ul>
</li>
<li>自定义事件的 事件名 必须全小写。<ul>
<li>在 JavaScript 广泛应用的浏览器环境，绝大多数 DOM 事件名称都是全小写的。为了遵<br>循大多数 JavaScript 开发者的习惯，在设计自定义事件时，事件名也应该全小写。</li>
</ul>
</li>
<li>自定义事件只能有一个 event 参数。如果事件需要传递较多信息，应仔细设计事件对象。<ul>
<li>一个事件对象的好处有：<ol>
<li>顺序无关，避免事件监听者需要记忆参数顺序。</li>
<li>每个事件信息都可以根据需要提供或者不提供，更自由。</li>
<li>扩展方便，未来添加事件信息时，无需考虑会破坏监听器参数形式而无法向后兼容。</li>
</ol>
</li>
</ul>
</li>
<li>设计自定义事件时，应考虑禁止默认行为。<ul>
<li>常见禁止默认行为的方式有两种：<ul>
<li>事件监听函数中 return false。</li>
<li>事件对象中包含禁止默认行为的方法，如 preventDefault。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="动态特性"><a href="#动态特性" class="headerlink" title="动态特性"></a>动态特性</h4><ol>
<li>eval<ul>
<li>避免使用直接 eval 函数。<ul>
<li>直接 eval，指的是以函数方式调用 eval 的调用方法。直接 eval 调用执行代码的作用域为本地作用域，应当避免。</li>
</ul>
</li>
<li>尽量避免使用 eval 函数。</li>
</ul>
</li>
<li>动态执行代码<ul>
<li>使用 new Function 执行动态代码。<ul>
<li>通过 new Function 生成的函数作用域是全局使用域，不会影响当当前的本地作用域。如果有动态代码执行的需求，建议使用 new Function。</li>
</ul>
</li>
</ul>
</li>
<li>with<ul>
<li>尽量不要使用 with。</li>
</ul>
</li>
<li>delete<ul>
<li>减少 delete 的使用。（如果没有特别的需求，减少或避免使用 delete。delete 的使用会破坏部分 JavaScript 引擎的性能优化。）</li>
<li>处理 delete 可能产生的异常。<ul>
<li>对于有被遍历需求，且值 null 被认为具有业务逻辑意义的值的对象，移除某个属性必须使用 delete 操作。</li>
<li>在严格模式或 IE 下使用 delete 时，不能被删除的属性会抛出异常，因此在不确定属性是否可以删除的情况下，建议添加 try-catch 块。</li>
</ul>
</li>
</ul>
</li>
<li>对象属性<ul>
<li>避免修改外部传入的对象<ul>
<li>JavaScript 因其脚本语言的动态特性，当一个对象未被 seal 或 freeze 时，可以任意添加、删除、修改属性值。</li>
<li>但是随意地对 非自身控制的对象 进行修改，很容易造成代码在不可预知的情况下出现问题</li>
</ul>
</li>
<li>具备强类型的设计。</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/interview/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Laurel">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/16/interview/" itemprop="url">interview</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-16T11:06:36+08:00">
                2019-04-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="interview"><a href="#interview" class="headerlink" title="interview"></a>interview</h2><h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><ul>
<li>不采用缓存的目的是？如何实现？<ul>
<li>浏览器有一个临时的存储网站文件的缓存，所以他们不需要在切换或重新加载同一个页面时再次重新下载。服务器设置发送头信息告诉浏览器在给定的一段时间内使用存储文件。可极大加快网站的速度和节省带宽。</li>
<li>当网站更新时，因为用户的缓存依然指向旧文件，会造成问题。如果缓存的CSS和JS文件引用的元素不再存在，已移除或已重命名时，它会保留原有功能或破坏网站</li>
<li>禁用缓存是一个强制浏览器下载新文件的过程。通过命名来区分旧文件</li>
<li>常用的强制浏览器重新下载文件的技术是在文件的结尾处增加一个查询字符串：src=”js/script.js” =&gt; src=”js/script.js?v=2”</li>
</ul>
</li>
</ul>
<h4 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h4><ul>
<li><p>JS 的数据类型</p>
<ul>
<li>最新的ECMAScript定义了7种数据类型：<ul>
<li>原始数据类型：Boolean，Null，Undefined，Number，String，Symbol</li>
<li>引用数据类型：Object [Array, Date, Function, RegExp]</li>
</ul>
</li>
</ul>
</li>
<li><p>避免回调地狱</p>
<ul>
<li>使用async/await重构函数返回promise是最佳选择；返回一个promise，等待数据接受后然后解析，允许下一行代码以同步风格的方式进行。</li>
<li>模块化：把回调分割为独立函数</li>
<li>使用一个控制流的库，像async</li>
<li>使用一个带有promise的生成器</li>
<li>使用async/await（ES8及以上）</li>
</ul>
</li>
<li><p>什么是Promise</p>
<p>Promise对象代表的是异步操作最终的完成(或失败)，和它的结果值。Promise是链式调用的。</p>
<ul>
<li>Promise的状态只能是其中之一：<ul>
<li>pending：初始状态，不是完成态(fulfilled)也不是拒绝态(rejected)</li>
<li>fulfilled：意味操作已经完成</li>
<li>rejected：意味操作已经失败</li>
</ul>
</li>
</ul>
</li>
<li><p>什么是回调</p>
<p>回调函数是作为一个参数传递给另一个函数的函数，只有在事件触发或具体任务完成时调用，经常用在异步代码中。回调函数会在一段代码之后调用，但可以在初始化声明，而不需要调用</p>
<p>回调函数也可以是同步的。</p>
</li>
<li><p>JS中，如何比较两个对象</p>
</li>
</ul>
<p>即使两个相同属性相同值的不同对象，当使用 == 或 === 进行比较时，也不认为他们相等。因为他们都是通过引用比较的，不像基本类型是通过值比较的。</p>
<p>提供一个辅助函数，它会迭代每个对象每个自己的属性，测试他们是否有相同的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDeepEqual</span>(<span class="params">obj1, obj2, testPrototype = false</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (obj1 === obj2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj1 === <span class="string">'function'</span> &amp;&amp; <span class="keyword">typeof</span> obj2 === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj1.toString() === obj2.toString()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (obj1 <span class="keyword">instanceof</span> <span class="built_in">Date</span> &amp;&amp; obj2 <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> obj1.getTime() === obj2.getTime()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        <span class="built_in">Object</span>.prototype.toString.call(obj1) !== <span class="built_in">Object</span>.prototype.toString.call(obj2)</span><br><span class="line">        &amp;&amp; obj1 !== <span class="string">'object'</span></span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> prototypeAreEqual = testPrototype</span><br><span class="line">        ? isDeepEqual(</span><br><span class="line">            <span class="built_in">Object</span>.getPrototypeOf(obj1),</span><br><span class="line">            <span class="built_in">Object</span>.getPrototypeOf(obj2),</span><br><span class="line">            <span class="literal">true</span></span><br><span class="line">        )</span><br><span class="line">        : <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> obj1Props = <span class="built_in">Object</span>.getOwnPropertyNames(obj1)</span><br><span class="line">    <span class="keyword">const</span> obj2Props = <span class="built_in">Object</span>.getOwnPropertyNames(obj2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        obj1Props.length === obj2Props.length &amp;&amp;</span><br><span class="line">        prototypesAreEqual &amp;&amp;</span><br><span class="line">        obj1Props.every(<span class="function"><span class="params">prop</span> =&gt;</span> isDeepEqual(obj1[prop], obj2[prop]))</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Laurel</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Laurel</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
