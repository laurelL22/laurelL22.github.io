<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="desc">
<meta name="keywords" content="keyword">
<meta property="og:type" content="website">
<meta property="og:title" content="Laurel Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Laurel Blog">
<meta property="og:description" content="desc">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Laurel Blog">
<meta name="twitter:description" content="desc">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Laurel Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Laurel Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">许多年前，曾是个朴素的少年</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/02/nginx-configure-explanation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/02/nginx-configure-explanation/" itemprop="url">nginx-configure-explanation</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-02T11:05:24+08:00">
                2018-11-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="nginx-配置文件nginx-conf-详解"><a href="#nginx-配置文件nginx-conf-详解" class="headerlink" title="nginx 配置文件nginx.conf 详解"></a>nginx 配置文件nginx.conf 详解</h2><blockquote>
<p>#nginx 进程，一般设置为和cpu核数一样</p>
</blockquote>
<pre><code>worker_process 4;
</code></pre><blockquote>
<p>#错误日志存放目录</p>
</blockquote>
<pre><code>error_log   /logs/error.log   crit;
</code></pre><blockquote>
<p>#运行用户，默认即是nginx,可不设置</p>
</blockquote>
<pre><code>user nginx;
</code></pre><blockquote>
<p>#进程pid存放位置</p>
</blockquote>
<pre><code>pid     /logs/nginx.pid;
</code></pre><blockquote>
<p>#最大文件打开书（连接），可设置为系统优化后的ulimit-HSn的结果</p>
</blockquote>
<pre><code>worker_rlimit_nofile 51200;
</code></pre><blockquote>
<p>#cpu亲和力配置，让不同的进程使用不同的cpu</p>
</blockquote>
<pre><code>worker_cpu_affinity 0001 0010 0100 1000 0001 00100100 1000;
</code></pre><blockquote>
<p>#工作模式及连接数上限</p>
</blockquote>
<pre><code>events 
{
    use epoll;       #epoll是多路复用IO(I/O Multiplexing)中的一种方式,但是仅用于linux2.6以上内核,可以大大提高nginx的性能
    worker_connections 1024;  #;单个后台worker process进程的最大并发链接数
}
###################################################

http

{
    include mime.types; #文件扩展名与类型映射表
    default_type application/octet-stream; #默认文件类型
</code></pre><blockquote>
<p>#limit 模块，可防范一定量的DDOS攻击</p>
<p>#用来存储session会话的状态，如下是session分配一个名为one的10M的内存存储区，限制了每秒只接收一个ip的一次请求 1r/s</p>
</blockquote>
<pre><code>limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
limit_conn_zone $binary_remote_addr zone=addr:10m;
</code></pre><blockquote>
<p>#设定请求缓存</p>
</blockquote>
<pre><code>server_names_hash_bucket_size 128;

client_header_buffer_size 512k;

large_client_header_buffers 4512k;

client_max_body-size 100m;
</code></pre><blockquote>
<p>#隐藏响应header和错误通知中的版本号</p>
</blockquote>
<pre><code>server_tokens off;
</code></pre><blockquote>
<p>#开启高效传输模式</p>
</blockquote>
<pre><code>sendfile on;
</code></pre><blockquote>
<p>#激活tcp_nopush 参数可以允许把httpresponse header 和文件的开始放在一个文件里发布，积极的作用是减少网络报文段的数量</p>
</blockquote>
<pre><code>tcp_nopush on;
</code></pre><blockquote>
<p>#激活<br>tcp_nodelay, 内核会等待将更多的字节组成一个数据包，从而提高I/O性能</p>
</blockquote>
<pre><code>tcp_nodelay on;
</code></pre><blockquote>
<p>#FastCGI 相关参数：为了改善网站性能：减少资源占用，提高访问速度</p>
</blockquote>
<pre><code>fastcgi_connect_timeout 300;
fastcgi_send_timeout 300;
fastcgi_read_timeout 300;
fastcgi_buffer_size 64k;
fastcgi_buffers 4 64k;
fastcgi_busy_buffers_size 128k;
fastcgi_temp_file_write_size 128k;
</code></pre><blockquote>
<p>#连接超时时间，单位为秒</p>
</blockquote>
<p>   keepalive_timeout 60;</p>
<blockquote>
<p>#开启gzip 压缩功能</p>
</blockquote>
<pre><code>gzip on;
</code></pre><blockquote>
<p>#设置允许压缩的页面最小字节数，页面字节数从header头的Content-Length 中获取。默认值是0，表示不管页面多大都进行压缩。建议设置成大于1K。如果小于1K可能会越压越大</p>
</blockquote>
<pre><code>gzip_min_length 1k;
</code></pre><blockquote>
<p>#</p>
</blockquote>
<pre><code>}
</code></pre><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    resolver 172.22.1.253;</span><br><span class="line"></span><br><span class="line">    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                  '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                  '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8086;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        access_log  lihuan.access.log;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">	    proxy_pass http://family.baidu.com$request_uri;</span><br><span class="line">        &#125;</span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">	listen       8087;</span><br><span class="line">	server_name  127.0.0.1;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">	    proxy_pass http://127.0.0.1:8080;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">	#</span><span class="bash"> location /api &#123;</span></span><br><span class="line"><span class="meta">	#</span><span class="bash">	rewrite ^.+api/?(.*)$ /<span class="variable">$1</span> <span class="built_in">break</span>;</span></span><br><span class="line"><span class="meta">	#</span><span class="bash">	proxy_pass http://api.b.com:8080/api/<span class="variable">$1</span></span></span><br><span class="line"><span class="meta">	#</span><span class="bash"> &#125;</span></span><br><span class="line"></span><br><span class="line">        location ~ /api/ &#123;</span><br><span class="line">	    proxy_pass http://meeting-bot.dev.weiyun.baidu.com;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    include servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/30/ES6条件语句技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/30/ES6条件语句技巧/" itemprop="url">ES6条件语句技巧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-30T10:47:52+08:00">
                2018-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate/" itemprop="url" rel="index">
                    <span itemprop="name">cate</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="使用Array-includes-来处理多个条件"><a href="#使用Array-includes-来处理多个条件" class="headerlink" title="使用Array.includes 来处理多个条件"></a>使用Array.includes 来处理多个条件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = [<span class="string">'zhang3'</span>, <span class="string">'li4'</span>, <span class="string">'wang5'</span>];</span><br><span class="line">    <span class="keyword">if</span> (arr.includes(val)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'got it'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="减少嵌套，提前使用-return-语句"><a href="#减少嵌套，提前使用-return-语句" class="headerlink" title="减少嵌套，提前使用 return 语句"></a>减少嵌套，提前使用 return 语句</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发现无效条件时提前 return</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = [<span class="string">'zhang3'</span>, <span class="string">'li4'</span>, <span class="string">'wang5'</span>];</span><br><span class="line">    <span class="keyword">if</span> (!val) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'no val'</span>); <span class="comment">// return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (arr.includes(val)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'got it'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用函数的默认参数-和-解构"><a href="#使用函数的默认参数-和-解构" class="headerlink" title="使用函数的默认参数 和 解构"></a>使用函数的默认参数 和 解构</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 默认参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">val, q = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!val) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">`val is<span class="subst">$&#123;val&#125;</span> and q id <span class="subst">$&#123;q&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">&#123;name&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.info(name || <span class="string">'unknown'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用name变量取代val.name 变量</span></span><br><span class="line"><span class="comment">// 还需将&#123;&#125;指定为默认值。否则可能会报错无法解析’undefined’或’null’的属性名称</span></span><br><span class="line"><span class="comment">// 还可以引入loadsh库， _.get()方法</span></span><br></pre></td></tr></table></figure>
<h3 id="选择Map-Object-字面凉，而不是Switch语句"><a href="#选择Map-Object-字面凉，而不是Switch语句" class="headerlink" title="选择Map/Object 字面凉，而不是Switch语句"></a>选择Map/Object 字面凉，而不是Switch语句</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用对象字面量，根据颜色找出对应的水果</span></span><br><span class="line"><span class="keyword">const</span> fruitColor = &#123;</span><br><span class="line">    red: [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>],</span><br><span class="line">    yellow: [<span class="string">'banana'</span>, <span class="string">'pineapple'</span>],</span><br><span class="line">    purple: [<span class="string">'grape'</span>, <span class="string">'plum'</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fruitColor[color] || [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 Map ，根据颜色找出对应的水果(Map是新的对象类型，允许存储键值对)</span></span><br><span class="line"><span class="keyword">const</span> fruitColor = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    .set(<span class="string">'red'</span>, [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>])</span><br><span class="line">    .set(<span class="string">'yellow'</span>, [<span class="string">'banana'</span>, <span class="string">'pineapple'</span>])</span><br><span class="line">    .set(<span class="string">'purple'</span>, [<span class="string">'grape'</span>, <span class="string">'plum'</span>]);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fruitColor.get(color) || [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以使用Array.filter 重构</span></span><br></pre></td></tr></table></figure>
<h3 id="使用Array-every-和-Array-some来处理全部-部分满足条件"><a href="#使用Array-every-和-Array-some来处理全部-部分满足条件" class="headerlink" title="使用Array.every 和 Array.some来处理全部/部分满足条件"></a>使用Array.every 和 Array.some来处理全部/部分满足条件</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/26/node-session-cache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/26/node-session-cache/" itemprop="url">node-session-cache</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-26T17:02:03+08:00">
                2018-10-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://techblog.toutiao.com/2017/11/29/nodezhong-sessionchi-jiu-hua-yu-redishuan-cun/" target="_blank" rel="noopener">link</a></p>
<h2 id="node中Session持久化与Redis缓存"><a href="#node中Session持久化与Redis缓存" class="headerlink" title="node中Session持久化与Redis缓存"></a>node中Session持久化与Redis缓存</h2><blockquote>
<p>HTTP协议和TCP/IP协议组中其他协议相同，用于客户端和服务端之间的通信，HTTP是一种无状态协议，及协议本身不保存客户端和服务端的通信状态，即在HTTP这个级别，协议不会对请求或响应做持久化处理，也是为了更快的处理大量事务，确保协议的可伸缩性。</p>
</blockquote>
<p><strong><em>cookie：</em></strong> 为了解决HTTP的无状态，引入了Cookie技术，Cookie技术通过在请求和响应报文中写入cookie信息来控制客户端的状态。</p>
<p><strong><em>session：</em></strong> 为了跟踪客户端的状态，服务端 借助于客户端的cookie和后端存储实现的会话状态。Session机制决定了当前客户只会获取到自己的Session，而不会获取别人的Seesion</p>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><ol>
<li>制定cookie机制，用于实现客户端和服务器之间的状态共享。</li>
</ol>
<ul>
<li><p>Cookie 是解决HTTP无状态性的有效手段，服务器可以设置（set-cookie）或读取cookie中所包含的信息</p>
</li>
<li><p>当用户登录后，服务器会发送包含登录凭据的cookie到用户浏览器客户端，而浏览器对该Cookie进行某种形式的存储（内存或硬盘）</p>
</li>
<li><p>用户再次访问该网站时，浏览器会发送该Cookie（Cookie未到期时）到服务器，服务器对该凭据进行验证，合法时使用户不必输入用户名和密码就可以直接登录</p>
</li>
</ul>
<ol>
<li>实现原理</li>
</ol>
<p>Cookie定义了HTTP请求头和HTTP响应头，客户端和服务端通过这些头信息进行状态交互</p>
<ul>
<li><p>客户端第一次请求：服务器端如果需要记录用户信息，才会在响应信息中返回Set-cookie响应头</p>
</li>
<li><p>客户端会根据响应头存储Cookie信息</p>
</li>
<li><p>客户端再次请求：会在请求头上带上存储的cookie信息，服务端通过cookie信息识别用户</p>
</li>
</ul>
<ol>
<li>cookie类别</li>
</ol>
<p><strong><em>cookie总是存储在客户端（浏览器），根据其存储位置可以分切：内存式cookie、硬盘式cookie</em></strong></p>
<p>内存式：存储在内存中，浏览器关闭后清除，也非持久化存储（会话cookie）</p>
<pre><code>- cookie不包含到期日期，则可视为会话cookie。会话cookie存储在内存中，绝不会写入磁盘。当浏览器关闭时，cookie将从此永久丢失
</code></pre><p>硬盘式：保存在硬盘中，浏览器关闭后不会清除，除非手动清除或到了过期时间，也将持久存储（持久cookie）</p>
<pre><code>- cookie包含到期日期，则可视为持久性cookie。在指定的到期日期，cookie将从磁盘中删除
</code></pre><blockquote>
<p>通常可以通过expires到期时间来区分</p>
</blockquote>
<ol>
<li>HTTP协议中为cookie服务的首部字段</li>
</ol>
<p>Set-cookie: 响应首部字段，开始状态管理所使用的Cookie信息</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>NAME-VALUE</td>
<td>赋予Cookie的key / value (必需)</td>
</tr>
<tr>
<td>expires=DATE</td>
<td>指定浏览器可以发送Cookie的有效期（默认为浏览器关闭前为止）</td>
</tr>
<tr>
<td>path=PATH</td>
<td>将服务器上的文件目录作为Cookie的使用对象（默认为文档所在的文件目录）</td>
</tr>
<tr>
<td>domain=域名</td>
<td>作为Cookie使用对象的域名（默认为Cookie的服务器域名）</td>
</tr>
<tr>
<td>Secure</td>
<td>仅在HTTPS安全通信时才会发送Cookie</td>
</tr>
<tr>
<td>HttpOnly</td>
<td>加以限制，使Cookie不能被javascript脚本访问。可以放置跨站脚本攻击对cookie信息窃取</td>
</tr>
</tbody>
</table>
<p>Cookie：请求首部字段，服务端接受到的cookie信息</p>
<ol>
<li>cookie-parser</li>
</ol>
<p>cookie-parser 是node中用于操作cookie的中间件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">request, response, next</span>) </span>&#123;</span><br><span class="line">    res.cookie(name, value [,options])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>name: cookie名
value: cookie值
options: set-cookie 选项
    domain：cookie在什么域名下有效，类型为String。默认为网站域名

    expires：cookie过期时间，类型为Date。如果没有设置或者设置为0，那么该cookie只在这个这个session有效，即关闭浏览器后，这个cookie会被浏览器删除

    httpOnly：只能被web server访问，类型Boolean

    maxAge：实现expires的功能，设置cookie过期的时间，类型为String，指明从现在开始，多少毫秒以后，cookie到期

    path：cookie在什么路径下有效，默认为&apos;/&apos;，类型为String

    secure：只能被HTTPS使用，类型Boolean，默认为false

    signed：使用签名，类型Boolean，默认为false。[express会使用req.secret来完成签名，需要cookie-parser配合使用]
</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.引入</span></span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">'cookie-parser'</span>); <span class="comment">// 引入模块</span></span><br><span class="line">app.use(cookieParser()); <span class="comment">// 挂载中间件（实例化）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.创建</span></span><br><span class="line">res.cookie(name, value [,options]);</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">'maxAge'</span>: <span class="number">9000</span>, <span class="comment">// 有效时长（毫秒）</span></span><br><span class="line">    <span class="string">'signed'</span>: <span class="literal">false</span> <span class="comment">// 默认为false，表示是否签名（Boolean）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 获取cookie</span></span><br><span class="line"><span class="keyword">var</span> cookies = req.cookies <span class="comment">// 获取cookies集合</span></span><br><span class="line"><span class="keyword">var</span> value = req.cookies.key <span class="comment">// 获取名称未key的cookie的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 删除cookie</span></span><br><span class="line">res.clearCookie(name [,options]) <span class="comment">// name 是cookie名，options与创建cookie时所传一致</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 签名</span></span><br><span class="line"><span class="comment">// 签名可以提高安全性</span></span><br><span class="line"><span class="comment">// 使用签名生成cookie的方法，大同小异，修改上文</span></span><br><span class="line"></span><br><span class="line">app.use(cookieParser(<span class="string">'yog'</span>)); <span class="comment">// 需要穿一个自定义字符串作为secret</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建cookie的options中，必填signed: true</span></span><br><span class="line">res.cookie(name, value, &#123;<span class="string">'signed'</span>: <span class="literal">true</span>&#125;);</span><br><span class="line"><span class="keyword">var</span> cookies = req.sifnedCookies <span class="comment">// 获取cookie集合</span></span><br><span class="line"><span class="keyword">var</span> value = req.signedCookies.key <span class="comment">// 获取名称为key的cookie值</span></span><br></pre></td></tr></table></figure>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><ol>
<li><p>Session 需要借助Cookie实现，Session数据存储在服务端，而只在Cookie中存储一个SessionId，乐意保证安全性和降低服务器负载</p>
</li>
<li><p>express-session<br>express-session 真正在服务端保存数据的中间件，需要独立安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express-session --save</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>)</span><br><span class="line">app.use(session([options]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常用的options</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">'secret'</span>: <span class="string">'yog'</span>, <span class="comment">// 签名</span></span><br><span class="line">    <span class="string">'cookie'</span>: &#123;</span><br><span class="line">        <span class="string">'maxAge'</span>: <span class="number">90000</span> <span class="comment">// 因为创建session的同时会创建cookie来保存sessionid，所以options终端恩cookie.maxAge可看做是session的有效时长</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'session_id'</span> <span class="comment">// 在浏览器中生成cookie的名称key, 默认是connect.sid</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建session</span></span><br><span class="line">req.session.key = value</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建多个session</span></span><br><span class="line">req.session = &#123;</span><br><span class="line">    key1: value1,</span><br><span class="line">    key2: value2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 获取session</span></span><br><span class="line"><span class="keyword">var</span> session = req.session <span class="comment">// 获取session集合</span></span><br><span class="line"><span class="keyword">var</span> value = req.session.key <span class="comment">// 获取名称为key的session的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 销毁</span></span><br><span class="line">req.session.destory() <span class="comment">// 清空所有session</span></span><br><span class="line">req.session.key.destory() <span class="comment">// 销毁名称为key的session的值</span></span><br></pre></td></tr></table></figure>
<h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><p><strong><em>session存在的问题：</em></strong> Session用于在服务端保存用户会话状态（如：用户登录信息等），Session 在程序重启、多进程运行、负载均衡、跨域等情况时，会出现Session丢失或多进程、多个负载站点见不能共享的情况</p>
<p><strong><em>要解决这些问题：</em></strong> 需要将Session持久化存储，Redis存储是一个非常不错的Session持久化解决方案</p>
<p>Redis是一个高性能的key-value 数据库</p>
<ol>
<li>概述</li>
</ol>
<p>特点</p>
<ul>
<li>Redis 支持数据的持久化，可以讲内存中的数据保存在磁盘中，重启时可以再次加载进行使用</li>
<li>Redis 不仅仅是支持简单的key-value 类型的数据，同时还提供list，set，zset，hash等数据结构的存储</li>
<li>Redis 支持数据的备份，即master-slave 模式的数据备份</li>
</ul>
<p>优势</p>
<ul>
<li><p>性能极高 – Redis能读的速度是110000次/s，写的速度是81000次/s</p>
</li>
<li><p>丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作</p>
</li>
<li><p>原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行</p>
</li>
<li><p>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性</p>
</li>
</ul>
<ol>
<li>connect-redis<br>connect-redis 是一个Redis 版的session存储器，使用node_redis 作为驱动。借助它即可在Express中启用Redis来持久化Session</li>
</ol>
<p>使用之前先搭建好redis 环境和express应用</p>
<p>参数：<br>client: 你可以复用现有的redis客户端对象， 由redis.createClient() 创建</p>
<p>host: Redis服务器名</p>
<p>port: Redis服务器端口</p>
<p>socket: Redis服务器的unix_socket</p>
<p>ttl: Redis session TTL 过期时间 （秒）</p>
<p>disableTTL: 禁用设置的 TTL</p>
<p>db: 使用第几个数据库</p>
<p>pass: Redis数据库的密码</p>
<p>prefix: 数据表前辍即schema, 默认为 “sess:”</p>
<p>使用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 express-session 传给 connect-redis 来启用</span></span><br><span class="line"><span class="comment">// 引入相关模块：</span></span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>);  </span><br><span class="line"><span class="keyword">var</span> redis = <span class="built_in">require</span>(<span class="string">'redis'</span>);  </span><br><span class="line"><span class="keyword">var</span> RedisStore = <span class="built_in">require</span>(<span class="string">'connect-redis'</span>)(session);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建Redis客户端</span></span><br><span class="line"><span class="keyword">var</span> redisClient = redis.createClient(<span class="number">6379</span>, <span class="string">'127.0.0.1'</span>, &#123;<span class="attr">auth_pass</span>: <span class="string">'password'</span>&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置 Express 的 Session 存储中间件</span></span><br><span class="line">app.use(session(&#123;  </span><br><span class="line">    store:<span class="keyword">new</span> RedisStore(&#123;<span class="attr">client</span>: redisClient&#125;),</span><br><span class="line">    secret: <span class="string">'password'</span>,</span><br><span class="line">    resave: <span class="literal">false</span>,</span><br><span class="line">    saveUninitialized: <span class="literal">false</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!req.session) &#123;</span><br><span class="line">    <span class="keyword">return</span> next(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'error'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>此时，session信息就转移到redis数据库了，当应用重启后数据仍然可以通过cookie中的sessionid 获取到，做到数据持久化，提高应用的健壮性。</p>
<h2 id="Cookie-与-Session-机制"><a href="#Cookie-与-Session-机制" class="headerlink" title="Cookie 与 Session 机制"></a>Cookie 与 Session 机制</h2><p><a href="https://zhuanlan.zhihu.com/p/21275207?refer=Anonymous0" target="_blank" rel="noopener">link</a></p>
<blockquote>
<p>Cookie通过在客户端记录信息确定身份，Session通过在服务器端记录信息确定用户身份</p>
</blockquote>
<h3 id="cookie-机制"><a href="#cookie-机制" class="headerlink" title="cookie 机制"></a>cookie 机制</h3><p>Web应用程序是使用HTTP协议传输数据的。HTTP 协议是无状态的协议，一旦数据交换完毕，客户端与服务器端的连接就会关闭，再次交换数据需要建立新的连接。这就意味着服务器无法从连接上跟踪会话。 (要跟踪该会话，必须引入一种机制)</p>
<p>Cookie是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端颁发一个Cookie。客户端浏览器会把cookie保存起来，当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一桶提交给服务器。服务器检查该cookie，一次来辨认用户状态与权限。服务器还可以根据需要修改Cookie的内容。（Cookie功能需要浏览器的支持，如果不支持或者禁用了，cookie功能能就会失效）</p>
<ol>
<li>cookie 不可跨域性</li>
<li>Unicode编码：保存中文 （中文属于Unicode字符，在内存中占4个字节，而英文属于ASCII字符，内存中只占2个字节）使用Unicode字符试需进行编码</li>
<li>base64：保存二进制图片</li>
<li>cookie的有效期：由maxAge 决定。getMaxAge() 与 setMaxAge(int maxAge) 方法读写maxAge属性<ul>
<li>maxAge属性为正数，表示该cookie会在maxAge秒之后自动失效。浏览器会将maxAge为正数的cookie持久化，写到对应的Cookie文件中。关闭电脑或浏览器，只要还在maxAge之前，登录网站时cookie仍有效。默认为-1</li>
<li>maxAge为负数，表示该cookie仅在本浏览器窗口以及笨窗口打开的子窗口有效，关闭窗口后该cookie即失效，为临时性Cookie，不会持久化，不会写到Cookie文件中</li>
<li>maxAge为0，表示删除该Cookie。cookie机制没有提供删除Cookie的方法，因此通过设置该Cookie即时失效实现删除Cookie的效果。</li>
<li>失效的Cookie会被浏览器从Cookie文件或者内存中删除</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">'username'</span>, <span class="string">'zhang3'</span>); <span class="comment">// 新建Cookie</span></span><br><span class="line">cookie.setMaxAge(<span class="number">0</span>); <span class="comment">// 设置生命周期为0，不能为负数</span></span><br><span class="line">response.addCookie(cookie); <span class="comment">// 输出到客户端</span></span><br></pre></td></tr></table></figure>
<pre><code>* response 对象提供的Cookie操作方法只有一个添加操作add(Cookie cookie)
* 要修改Cookie只能使用一个同名的Cookie来覆盖原来的Cookie
* 删除时只需把maxAge修改为0
* 从客户端读取Cookie时，包括maxAge在内的其他属性都是不可读的，也不会被提交。浏览器提交cookie时只会提交name与value属性。maxAge属性只被浏览器用来判断Cookie是否过期
</code></pre><ol>
<li>Cookie的修改、删除<br>cookie不提供修改、删除操作。</li>
</ol>
<ul>
<li>修改某个Cookie，只需新建一个同名的Cookie，添加到response中覆盖原来的Cookie</li>
<li>删除某个Cookie，只需新建一个同名的cookie，并将maxAge设置为0，并添加到response中覆盖原来的Cookie。</li>
<li>修改、删除Cookie时，新建的Cookie除value、maxAge之外的所有属性，例如name、path、domain等，都要与原Cookie完全一样。否则，浏览器将视为两个不同的Cookie不予覆盖，导致修改、删除失败。</li>
</ul>
<ol>
<li>Cookie的域名<br>cookie是不可跨域的。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">'time'</span>, <span class="string">'20080808'</span>); <span class="comment">// 新建Cookie</span></span><br><span class="line">cookie.setDomain(<span class="string">'.hello.com'</span>); <span class="comment">// 设置域名</span></span><br><span class="line">cookie.setPath(<span class="string">'/'</span>); <span class="comment">// 设置路径</span></span><br><span class="line">cookie.setMaxAge(<span class="string">'MAX_VALUE'</span>); <span class="comment">// 设置有效期</span></span><br><span class="line">response.addCookie(cookie); <span class="comment">// 输出到客户端</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>domain参数必须以点(‘.’)开始。name相同但domain不同的两个Cookie是两个不同的Cookie。如果想要两个域名完全不同的网站共有Cookie，可以生成两个Cookie，domain属性分别为两个域名，输出到客户端</p>
</blockquote>
<ol>
<li><p>Cookie的路径<br>path属性决定允许访问Cookie的路径。页面只能获取它属于的Path的Cookie</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"time"</span>,<span class="string">"20080808"</span>); <span class="comment">// 新建Cookie</span></span><br><span class="line"></span><br><span class="line">cookie.setPath(<span class="string">"/session/"</span>); <span class="comment">// 设置为“/”时允许所有路径使用Cookie。path属性需要使用符号“/”结尾</span></span><br><span class="line"></span><br><span class="line">response.addCookie(cookie); <span class="comment">// 输出到客户端</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Cookie的安全属性<br>如果不希望Cookie在HTTP等非安全协议中传输，可以设置Cookie的secure属性为true。浏览器只会在HTTPS和SSL等安全协议中传输此类Cookie</p>
</li>
</ol>
<ul>
<li>cookie.setSecure(true); // 设置安全属性</li>
<li>secure属性并不能对Cookie内容加密，因而不能保证绝对的安全性。如果需要高安全性，需要在程序中对Cookie内容加密、解密，以防泄密。</li>
</ul>
<ol>
<li>JavaScript操作Cookie</li>
</ol>
<ul>
<li>document.write(document.cookie);</li>
</ul>
<ol>
<li>永久登录</li>
</ol>
<p>如果用户是在自己家的电脑上上网，登录时就可以记住他的登录信息，下次访问时不需要再次登录，直接访问即可。实现方法是把登录信息如账号、密码等保存在Cookie中，并控制Cookie的有效期，下次访问时再验证Cookie中的登录信息即可。</p>
<p>保存登录信息有多种方案。最直接的是把用户名与密码都保持到Cookie中，下次访问时检查Cookie中的用户名与密码，与数据库比较。这是一种比较危险的选择，一般不把密码等重要信息保存到Cookie中。</p>
<p>还有一种方案是把密码加密后保存到Cookie中，下次访问时解密并与数据库比较。这种方案略微安全一些。如果不希望保存密码，还可以把登录的时间戳保存到Cookie与数据库中，到时只验证用户名与登录时间戳就可以了。</p>
<hr>
<h3 id="Session-机制"><a href="#Session-机制" class="headerlink" title="Session 机制"></a>Session 机制</h3><p>Session是服务器端使用的一种记录客户端状态的机制</p>
<p>客户端浏览器访问服务器时，服务器把客户端信息以某种形式记录在服务器上。就是session。客户端再次访问时只需从Session中查找客户的状态就行。</p>
<ol>
<li><p>实现用户登录</p>
<ul>
<li>Session 对象是在客户端第一次请求服务器时创建的。</li>
<li>Session也是一种key-value的属性对，通过getAttribute(Stringkey)和setAttribute(String key，Objectvalue)方法读写客户状态信息</li>
<li>Session机制决定了当前客户只会获取到自己的Session，而不会获取到别人的Session。各客户的Session也彼此独立，互不可见。</li>
<li>Session的使用比Cookie方便，但是过多的Session存储在服务器内存中，会对服务器造成压力。</li>
</ul>
</li>
<li><p>Session的生命周期</p>
<ul>
<li>Session保存在服务器端。为了获得更高的存取速度，服务器一般把Session放在内存里。每个用户都会有一个独立的Session。</li>
<li>只有访问JSP、Servlet等程序时才会创建Session，只访问HTML、IMAGE等静态资源并不会创建Session。</li>
<li>如果尚未生成Session，也可以使用request.getSession(true)强制生成Session。</li>
<li>Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，并维护该Session。</li>
</ul>
</li>
<li><p>Session的有效期</p>
<ul>
<li>为防止内存溢出，服务器会把长时间内没有活跃的Session从内存删除。这个时间就是Session的超时时间。如果超过了超时时间没访问过服务器，Session就自动失效了。</li>
</ul>
</li>
<li><p>Session对浏览器的要求</p>
<ul>
<li>虽然Session保存在服务器，对客户端是透明的，它的正常运行仍然需要客户端浏览器的支持。这是因为Session需要使用Cookie作为识别标志。</li>
<li>HTTP协议是无状态的，Session不能依据HTTP连接来判断是否为同一客户，因此服务器向客户端浏览器发送一个名为JSESSIONID的Cookie，它的值为该Session的id（也就是HttpSession.getId()的返回值）。Session依据该Cookie来识别是否为同一用户。</li>
<li>该Cookie为服务器自动生成的，它的maxAge属性一般为–1，表示仅当前浏览器内有效，并且各浏览器窗口间不共享，关闭浏览器就会失效</li>
<li>新开的浏览器窗口会生成新的Session，但子窗口除外。子窗口会共用父窗口的Session。例如，在链接上右击，在弹出的快捷菜单中选择“在新窗口中打开”时，子窗口便可以访问父窗口的Session</li>
</ul>
</li>
<li><p>URL地址重写</p>
<ul>
<li>URL地址重写是对客户端不支持Cookie的解决方案。</li>
<li>URL地址重写的原理是将该用户Session的id信息重写到URL地址中。服务器能够解析重写后的URL获取Session的id。这样即使客户端不支持Cookie，也可以使用Session来记录用户状态。</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/24/docker-read/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/24/docker-read/" itemprop="url">docker-read</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-24T14:06:44+08:00">
                2018-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate-summary/" itemprop="url" rel="index">
                    <span itemprop="name">cate-summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="docker-安装（mac）"><a href="#docker-安装（mac）" class="headerlink" title="docker 安装（mac）"></a>docker 安装（mac）</h3><ul>
<li>brew cask install docker</li>
<li>docker –version</li>
<li>docker info</li>
<li>镜像加速<ul>
<li>国内网络问题，后续拉取 Docker 镜像十分缓慢，可以配置加速器来解决。</li>
<li>docker 应用 -&gt; Perferences -&gt; Daemon -&gt; Registry mirrors -&gt; 填写镜像地址（registry.dev.xxx.com）</li>
<li>微云上找一个node镜像地址：registry.dev.xxx.com/baidu_containers/nodejs-base:v1</li>
</ul>
</li>
</ul>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><ol>
<li>docker run 在容器内运行一个应用程序：<ul>
<li>docker run f97883e95d8d echo “echo docker”<ul>
<li>f97883e95d8d： 要运行的镜像</li>
<li>echo “echo docker”: 在启动的容器里执行的命令</li>
</ul>
</li>
</ul>
</li>
<li>运行交互式的容器：<ul>
<li>docker run -it f97883e95d8d bash<ul>
<li>-t:在新容器内指定一个伪终端或终端。</li>
<li>-i:允许你对容器内的标准输入 (STDIN) 进行交互。</li>
</ul>
</li>
</ul>
</li>
<li>容器container （运行时 RUNTIME）<ul>
<li>查看container 容器系统版本<blockquote>
<p>cat /etc/os-release</p>
</blockquote>
</li>
<li>查看当前系统的版本信息<blockquote>
<p>cat /proc/version</p>
</blockquote>
</li>
<li>查看容器内的标准输入输出<blockquote>
<p>docker logs 2b1b7a428627<br>docker logs CONTAINER ID/NAME</p>
</blockquote>
</li>
<li>停止容器：<blockquote>
<p>docker stop dd7521aca04a</p>
</blockquote>
</li>
<li>重启容器：<blockquote>
<p>docker restart dd7521aca04a<br>docker start dd7521aca04a</p>
</blockquote>
</li>
<li>检查容器的底层信息：<blockquote>
<p>docker inspect dd7521aca04a</p>
</blockquote>
</li>
<li>删除容器：<blockquote>
<p>docker rm dd7521aca04a</p>
</blockquote>
</li>
<li>退出容器：<ul>
<li>exit命令 或者 CTRL+D</li>
</ul>
</li>
</ul>
</li>
<li><p>镜像images （静态的）</p>
<ul>
<li><p>列出本地主机的镜像： docker images</p>
<ul>
<li>REPOSITORY： 表示镜像的仓库源</li>
<li>TAG：镜像的标签</li>
<li>IMAGE ID：镜像的ID</li>
<li>CREATED：镜像创建时间</li>
<li>SIZE：镜像大小</li>
</ul>
</li>
<li><p>从Docker Hub搜索镜像：<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a></p>
</li>
<li>查找镜像：    docker search httpd</li>
<li>拖取镜像：    docker pull httpd</li>
<li>使用镜像：    docker run httpd</li>
<li>创建镜像：<ul>
<li>从已经创建的容器中更新镜像，并且提交这个镜像</li>
<li>使用Dockerfile 指令来创建一个镜像</li>
</ul>
</li>
<li>构建镜像：<ul>
<li>使用命令： docker build，创建一个新的镜像。需要提前创建一个Dockfile文件，包含一组指令告诉Docker 如何构建镜像。</li>
<li>每一个指令都会在镜像上创建一个新的层， 每一个指令的前缀必须都是大写的。</li>
<li>第一条FFROM，指定使用哪个镜像源</li>
<li>RUN 指令 告诉docker在镜像内执行命令，安装了什么</li>
</ul>
</li>
<li>设置镜像标签<ul>
<li>docker tag 860c279d2fec runoob/centos:dev</li>
<li>镜像ID，是 860c279d2fec ,用户名称、镜像源名(repository name)和新的标签名(tag)</li>
</ul>
</li>
</ul>
</li>
<li><p>Docker容器连接：</p>
<ul>
<li></li>
</ul>
</li>
<li><p>微云上发布</p>
<ul>
<li>wget xxx // 获取镜像</li>
<li>unzip v0510.zip /home/work/project/xxx</li>
<li>node /home/work/project/app.js</li>
</ul>
</li>
<li><p>项目部署</p>
<ul>
<li>1.node/npm 依赖的环境 （固定不变的）</li>
<li>2.node_modules （基本不变）</li>
<li><p>3.src 源码 （动态变化）</p>
</li>
<li><p>最后一个依赖前两个： 1 + 2</p>
</li>
<li><p>制定Dockerfile</p>
<blockquote>
<p>FROM registry.dev.weiyun.baidu.com/baidu_containers/nodejs:v1<br>COPY node_modules/  /home/work/nodejs/…..</p>
</blockquote>
<blockquote>
<p>FROM registry.dev.weiyun.baidu.com/baidu_containers/nodejs:v2<br>COPY src/ /home/work/nodejs/</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Dockerfile</p>
<ul>
<li>FROM egistry.dev.weiyun.baidu.com/baidu_containers/nodejs-base:v1</li>
<li>RUN cp node.js xxx.nodejs</li>
<li>RUN xxx</li>
<li><p>CMD node app.js</p>
</li>
<li><p>每一层都是一个layer</p>
</li>
</ul>
</li>
</ol>
<h3 id="Docker-命令"><a href="#Docker-命令" class="headerlink" title="Docker 命令"></a>Docker 命令</h3><ul>
<li><p>容器生命周期管理</p>
<ul>
<li>docker run： 创建一个新的容器并运行一个命令</li>
<li>docker start： 启动一个或多个已经被停止的容器</li>
<li>docker stop：停止一个运行中的容器</li>
<li>docker restart: 重启容器</li>
<li>docker kill：杀掉一个运行中的机器</li>
<li>docker run：删除一个多个容器</li>
<li>docker pause/unpause：暂停/恢复容器中的所有进程</li>
<li>docker create：创建一新的容器但不启动它</li>
<li>docker exec：在运行的容器中执行命令</li>
</ul>
</li>
<li><p>容器操作</p>
<ul>
<li>docker ps：列出容器（-a， 显示所有容器；-f，根据条件过滤显示的内容；-l，最近创建的容器；-q，只显示容器编号）</li>
<li>docker inspect：获取容器/镜像的元数据</li>
</ul>
</li>
</ul>
<h3 id="Linux-发行版排行榜"><a href="#Linux-发行版排行榜" class="headerlink" title="Linux 发行版排行榜"></a>Linux 发行版排行榜</h3><ul>
<li><a href="https://zhuanlan.zhihu.com/p/33771775" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/33771775</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/27/webpack-path-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/27/webpack-path-config/" itemprop="url">webpack-path-config</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-27T17:25:23+08:00">
                2018-04-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.qinshenxue.com/article/20170315092242.html" target="_blank" rel="noopener">link</a></p>
<h2 id="关于webpack-路径参数的配置"><a href="#关于webpack-路径参数的配置" class="headerlink" title="关于webpack 路径参数的配置"></a>关于webpack 路径参数的配置</h2><h3 id="convention"><a href="#convention" class="headerlink" title="convention"></a>convention</h3><p><a href="http://javascript.ruanyifeng.com/nodejs/path.html" target="_blank" rel="noopener">path</a></p>
<ul>
<li>__dirname: 当前文件所在目录</li>
<li>process.cwd(): node当前运行目录，webpack运行所在目录</li>
<li>path.join(): 用于连接路径（依据当前系统的路径分割符）</li>
<li>path.resolve(): 将相对路径转为绝对路径</li>
<li>accessSync(): 用于同步读取一个路径</li>
<li>path.relative(): 返回第二个参数相对于第一个路径的相对路径。接收两个参数，两个参数都是绝对路径。</li>
<li>path.parse(): 可以返回路径各部分的信息  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> filePath = <span class="string">'/dir/file.json'</span></span><br><span class="line">path.parse(filePath).base; ()</span><br><span class="line">path.parse(filePath).name</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><strong>dirname, process.cwd(),  path.resolve(</strong>dirname, ‘../‘)<br>/Users/baidu/ai-voice/build /Users/baidu/ai-voice /Users/baidu/ai-voice</p>
</blockquote>
<h3 id="context"><a href="#context" class="headerlink" title="context"></a>context</h3><p>webpack编译时的基础目录，入口起点（entry）会相对于此目录查找。</p>
<p>默认为当前目录：</p>
<blockquote>
<p>this.set(‘context’, process.cwd) // process.cwd() 即为webpack运行所在的目录</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/19/bohe项目总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/19/bohe项目总结/" itemprop="url">bohe足迹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-19T15:23:47+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate-summary/" itemprop="url" rel="index">
                    <span itemprop="name">cate-summary</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、聊天消息由下向上冒效果"><a href="#一、聊天消息由下向上冒效果" class="headerlink" title="一、聊天消息由下向上冒效果"></a>一、聊天消息由下向上冒效果</h2><h3 id="scrollIntoView-amp-scrollIntoViewIfNeeded"><a href="#scrollIntoView-amp-scrollIntoViewIfNeeded" class="headerlink" title="scrollIntoView &amp; scrollIntoViewIfNeeded"></a>scrollIntoView &amp; scrollIntoViewIfNeeded</h3><ul>
<li>Element.scrollIntoView(): 让当前的元素滚动到浏览器窗口的可视区域内。</li>
<li>Element.scrollIntoViewIfNeeded(): 将不在浏览器窗口的可见区域内的元素滚动到浏览器窗口的可见区域。但如果该元素已经在浏览器窗口的可见区域内，则不会发生滚动。</li>
</ul>
<h3 id="scrollIntoView"><a href="#scrollIntoView" class="headerlink" title="scrollIntoView"></a>scrollIntoView</h3><p>两种参数：</p>
<ul>
<li>Boolean<ul>
<li>为true，元素的顶端将和其所在滚动区的可视区域的顶端对齐。</li>
<li>为false，元素的底端将和可视区域的底端对齐</li>
</ul>
</li>
<li>Object<ul>
<li>block： start | end （同上面的布尔值一样）</li>
<li>behavior： auto | instant | smooth （决定页面滚动行为）</li>
<li><strong>有些浏览器不支持behavior取值为smooth</strong></li>
</ul>
</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView" target="_blank" rel="noopener">scrollIntoView</a></p>
<h3 id="scrollIntoViewIfNeeded"><a href="#scrollIntoViewIfNeeded" class="headerlink" title="scrollIntoViewIfNeeded"></a>scrollIntoViewIfNeeded</h3><p>区别：</p>
<ul>
<li>scrollIntoViewIfNeeded比较随机，如果元素在可视区域，调用时，页面不会发生滚动。</li>
<li>scrollIntoViewIfNeeded只有Boolean型参数，没有动画效果。<ul>
<li>true为默认值，不是滚动到顶部，而是让元素在可视区域中<strong>居中对齐</strong>；</li>
<li>false时元素可能<strong>顶部或底部</strong>对齐</li>
<li><font color="#c82829">元素处于部分可见，无论参数值是什么，都会滚动到元素与可视区域顶部或底部对齐，取决于元素离哪端更近</font>

</li>
</ul>
</li>
</ul>
<h3 id="scroll-behavior"><a href="#scroll-behavior" class="headerlink" title="scroll-behavior"></a>scroll-behavior</h3><p><a href="https://css-tricks.com/almanac/properties/s/scroll-behavior/" target="_blank" rel="noopener">https://css-tricks.com/almanac/properties/s/scroll-behavior/</a></p>
<p><a href="https://jsfiddle.net/laurel/3s8kekqs/" target="_blank" rel="noopener">demo</a></p>
<h2 id="二、CSS3-animation-—-播放、暂停动画"><a href="#二、CSS3-animation-—-播放、暂停动画" class="headerlink" title="二、CSS3 animation — 播放、暂停动画"></a>二、CSS3 animation — 播放、暂停动画</h2><p>animation-play-state: paused | running</p>
<p>可以通查询它来确定动画是否正在运行。值可以被设置为暂停和恢复的动画的重放。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.animation</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: move <span class="number">2s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#stop</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.animation</span> &#123;</span><br><span class="line">    <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">    // -webkit-animation: none !important; // ios 替代方案</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#play</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.animation</span> &#123;</span><br><span class="line">    <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> move &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(-100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translate</span>(100px, 0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a href="https://jsfiddle.net/laurel/rhc3e6nw/" target="_blank" rel="noopener">demo</a></p>
<h3 id="animation-play-state-在ios上不生效，在安卓上ok"><a href="#animation-play-state-在ios上不生效，在安卓上ok" class="headerlink" title="animation-play-state 在ios上不生效，在安卓上ok"></a>animation-play-state 在ios上不生效，在安卓上ok</h3><ul>
<li><p>-webkit-animation-play-state: paused 在ios 替代方案：</p>
<ul>
<li>-webkit-animation: none !important;</li>
<li>but 会还原动画效果，不能记录当前动画状态</li>
</ul>
</li>
<li><p>添加父元素记录状态，彻底解决：<br><a href="https://www.jianshu.com/p/b6f71cdbe063" target="_blank" rel="noopener">https://www.jianshu.com/p/b6f71cdbe063</a></p>
</li>
</ul>
<h2 id="三、IOS移动端隐藏滚动条"><a href="#三、IOS移动端隐藏滚动条" class="headerlink" title="三、IOS移动端隐藏滚动条"></a>三、IOS移动端隐藏滚动条</h2><p><a href="https://github.com/o2team/H5Skills/issues/72" target="_blank" rel="noopener">问题</a></p>
<p>app是IOS 内核，但是使用display: none;无效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;::-webkit-scrollbar</span><br><span class="line">    display: none</span><br><span class="line">    visibility: hidden</span><br></pre></td></tr></table></figure></p>
<p>解决方案：<br>方案1：（包一层container，高度拉高，再用上面的盖掉）<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">scroll-list</span></span><br><span class="line">    <span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span></span><br><span class="line">    @<span class="keyword">include</span> px2rem(height, <span class="number">440</span>)</span><br><span class="line">    &amp;-container</span><br><span class="line">        @include px2rem(height, <span class="number">455</span>)</span><br><span class="line">        white-space: nowrap</span><br><span class="line">        overflow-x: scroll</span><br></pre></td></tr></table></figure></p>
<p>方案2：把滚动条撑开，然后通过负外边距抵消撑开的部分，使得外容器高度不受影响<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slider"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.slider</span> &#123;</span></span><br><span class="line"><span class="undefined">    overflow: hidden;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.slider</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="undefined">    padding-bottom: 10px;</span></span><br><span class="line"><span class="undefined">    margin-bottom: -10px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="四、footer固定在页面底部"><a href="#四、footer固定在页面底部" class="headerlink" title="四、footer固定在页面底部"></a>四、footer固定在页面底部</h2><p>只要四行就解决</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-flow</span>: column;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    header</span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    main</span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    footer</span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 法二: footer高度固定 + 绝对定位</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 法二: footer高度固定 + margin负值</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">main</span> &#123;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">100px</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://segmentfault.com/a/1190000004453249" target="_blank" rel="noopener">https://segmentfault.com/a/1190000004453249</a></p>
<h2 id="五、判断是否为iphonex"><a href="#五、判断是否为iphonex" class="headerlink" title="五、判断是否为iphonex"></a>五、判断是否为iphonex</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isIPhoneX</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="regexp">/iphone/gi</span>.test(<span class="built_in">window</span>.navigator.userAgent) &amp;&amp; (screen.height === <span class="number">812</span> &amp;&amp; screen.width === <span class="number">375</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="六、取消浏览器就滚动条位置"><a href="#六、取消浏览器就滚动条位置" class="headerlink" title="六、取消浏览器就滚动条位置"></a>六、取消浏览器就滚动条位置</h2><p>history.scrollRestoration是新增的一个属性，值为auto|manual,默认为auto记录滚动条位置, 设为manual时就禁用记录位置的功能。<br>兼容性不乐观（至少iOS 10.3.2版本的浏览器不行）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">'scrollRestoration'</span> <span class="keyword">in</span> history) &#123;</span><br><span class="line">    history.scrollRestoration = <span class="string">'manual'</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">window</span>.onunload= <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.scrollTo(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、axios-请求携带cookie信息"><a href="#七、axios-请求携带cookie信息" class="headerlink" title="七、axios 请求携带cookie信息"></a>七、axios 请求携带cookie信息</h2><ul>
<li>设置axios.defaults.withCredentials为true</li>
<li>服务器端需要配置header(“Access-Control-Allow-Credentials: true”)</li>
<li>!!! 当Access-Control-Allow-Credentials设为true的时候，Access-Control-Allow-Origin不能设为星号*</li>
</ul>
<h2 id="八、移动端底部固定定位fixed-amp-IOS上autofoucs失效，需要手动触发"><a href="#八、移动端底部固定定位fixed-amp-IOS上autofoucs失效，需要手动触发" class="headerlink" title="八、移动端底部固定定位fixed &amp; IOS上autofoucs失效，需要手动触发"></a>八、移动端底部固定定位fixed &amp; IOS上autofoucs失效，需要手动触发</h2><p>ios下fixed元素容易定位出错,软键盘弹出时影响fixed元素定位,而android下不会。</p>
<p>ios下由于软键盘唤出后，页面fixed元素会失效，导致跟随页面一起滚动。假如-页面不会过长出现滚动，即便fixed元素失效，也无法跟随页面滚动，也就不会出现上面的问题。</p>
<ul>
<li><p>通常将底部设置为fixed，当激活输入框的时候，将底部定位改为absolute，即可兼容ios和Android。</p>
</li>
<li><p>ios：在激活输入框的时候，保证页面滚动至底部，执行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.scrollTop = <span class="built_in">document</span>.body.scrollHeight;</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>点击按钮，触发输入框的focus事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="regexp">/(iphone|ipod|ipad)/gi</span>.test(<span class="built_in">window</span>.navigator.userAgent)) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$refs.inputbar.focus();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">_</span> =&gt;</span> &#123; <span class="comment">// fixed 安卓点击穿透</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/android/gi</span>.test(<span class="built_in">window</span>.navigator.userAgent)) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$refs.inputbar.focus();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>但仍有体验问题</p>
</li>
</ul>
<h2 id="九、ios系统手机无法自动播放音频-视频，-HTML5-audio-autoplay无效"><a href="#九、ios系统手机无法自动播放音频-视频，-HTML5-audio-autoplay无效" class="headerlink" title="九、ios系统手机无法自动播放音频/视频， HTML5 audio autoplay无效"></a>九、ios系统手机无法自动播放音频/视频， HTML5 audio autoplay无效</h2><p>这个是苹果系统限制默认不允许自动播放音频/视频,需要点一下触发play()事件才能播放;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'music'</span>).play();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>android 4.2添加了允许用户手势触发音视频播放接口，该接口默认为 true ，即默认不允许自动播放音视频，只能是用户交互的方式由用户自己促发播放。</p>
<blockquote>
<p>mWebview.getSettings().setMediaPlaybackRequiresUserGesture(false);</p>
</blockquote>
<h2 id="十、浏览器后退不刷新"><a href="#十、浏览器后退不刷新" class="headerlink" title="十、浏览器后退不刷新"></a>十、浏览器后退不刷新</h2><p>当点击后退时页面以缓存形式出现,而不是刷新后的,解决方法是用js:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onpageshow = <span class="function"><span class="keyword">function</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(evt.persisted)&#123; </span><br><span class="line">     <span class="built_in">document</span>.body.style.display =<span class="string">"none"</span>;</span><br><span class="line">     location.reload();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>onpageshow每次页面加载都会触发,无论是从缓存中加载还是正常加载,是和onload的区别;</li>
<li>persisted判断页面是否从缓存中读出</li>
</ul>
<h2 id="十一、个别设备样式问题"><a href="#十一、个别设备样式问题" class="headerlink" title="十一、个别设备样式问题"></a>十一、个别设备样式问题</h2><ul>
<li><p>input的placeholder文本位置偏上： line-height:normal;</p>
</li>
<li><p>部分安卓机box-sizing 有上边框：删除box-sizing:border-box;</p>
</li>
<li><p>CSS3 动画在安卓上卡顿：</p>
<p>  开启硬件加速：</p>
<ul>
<li>opacity: 1</li>
<li>-webkit-backface-visibility: hidden</li>
</ul>
</li>
</ul>
<h2 id="十二、屏幕像素比-屏幕缩放比"><a href="#十二、屏幕像素比-屏幕缩放比" class="headerlink" title="十二、屏幕像素比/屏幕缩放比"></a>十二、屏幕像素比/屏幕缩放比</h2><p>屏幕像素比 = window.devicePixelRatio</p>
<p>缩放比例 = 设备像素 / CSS像素 ===&gt; screen.availWidth/window.innerWidth</p>
<h2 id="十三、input的compositionstart-和-compositionend"><a href="#十三、input的compositionstart-和-compositionend" class="headerlink" title="十三、input的compositionstart 和 compositionend"></a>十三、input的compositionstart 和 compositionend</h2><p>在IOS中，input事件会截断非直接输入<br>（非直接输入：在输入汉字时，中间过程会输入拼音，每次输入一个字母会触发input事件，然而在没有点选择候选字或者点击【选定】按钮前，都属于非直接输入）</p>
<p><strong>需求：</strong> 直接输入之后才触发input事件，需引出：compositionstart 和 compositionend<br>compositionstart 事件在用户开始进行非直接输入时触发，在非直接输入结束，也即用户点选候选词 或者 点击【选定】按钮之后，会触发compositionend事件</p>
<p>添加一个inputLock变量，当用户未完成直接输入前，inputLock 为true，不触发input事件中的逻辑，当用户完成有效输入之后，inputLock设置为false，触发input事件的逻辑。<br>compositionend 事件在input事件后触发的，在compositionend事件出发时，也要调用input事件处理逻辑</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">inputHandle(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.inputLock) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> value = e.target.value;</span><br><span class="line">    value &amp;&amp; <span class="keyword">this</span>.searchHandler(value);</span><br><span class="line">&#125;,</span><br><span class="line">onCompositionstart(e) &#123;</span><br><span class="line">    <span class="comment">// 未完成直接输入前, inputLock 为true</span></span><br><span class="line">    throttle(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.inputLock = <span class="literal">true</span>;</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line">&#125;,</span><br><span class="line">onCompositionend(e) &#123;</span><br><span class="line">    <span class="comment">// 完成有效输入后, inputLock 为false</span></span><br><span class="line">    throttle(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.inputLock = <span class="literal">false</span>;</span><br><span class="line">    &#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compositionend 事件是在 input 事件后触发，在 compositionend事件触发时，也要调用 input处理逻辑</span></span><br><span class="line">    <span class="keyword">let</span> value = e.target.value;</span><br><span class="line">    value &amp;&amp; <span class="keyword">this</span>.searchHandler(value);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/08/移动端开发/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/08/移动端开发/" itemprop="url">移动端开发</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-08T14:41:03+08:00">
                2018-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate/" itemprop="url" rel="index">
                    <span itemprop="name">cate</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>移动端点击事件<br><strong>点击穿透：</strong><br>如果一个绝对定位或者固定定位元素处于页面最顶层，对这个元素绑定一个点击事件，点击这个元素，对应下面凡是有点击事件或者a标签都会被触发执行。</li>
</ol>
<ul>
<li>移动端： touchstart, touchmove, touched以及tap</li>
<li>pc端：mousedown, mousemove, mouseup, click</li>
</ul>
<ol>
<li>去掉a, input 在移动端浏览器中的默认样式</li>
</ol>
<ul>
<li>[1] 禁止a标签背景</li>
</ul>
<p>在移动端使用a标签做按钮的时候，点按会出现「暗色」的背景，去掉该背景的方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a,button,input,optgroup,select,textarea &#123;</span><br><span class="line">    -webkit-tap-highlight-color: rgba(0,0,0,0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>[2] 禁止长按a,img 标签出现菜单栏</li>
</ul>
<p>使用a标签时，移动端长按会出现一个菜单栏，禁止呼出菜单栏：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a, img &#123;</span><br><span class="line">    -webkit-touch-callout: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>[3] 流畅滚动</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    -webkit-overflow-scrolling: touch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>[4] 修改webkit表单输入框placeholder 的样式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">input::-webkit-input-placeholder&#123;</span><br><span class="line">    color: #AAA;</span><br><span class="line">&#125;</span><br><span class="line">input:focus::-webkit-input-placeholder&#123;</span><br><span class="line">    color: #EEE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>[5] 禁止IOS和Android用户选中文字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.css &#123;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/04/ES6-tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/04/ES6-tips/" itemprop="url">ES6-tips</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-04T14:43:54+08:00">
                2018-04-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cate/" itemprop="url" rel="index">
                    <span itemprop="name">cate</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ES6-Tips"><a href="#ES6-Tips" class="headerlink" title="ES6 Tips"></a>ES6 Tips</h2><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><ol>
<li>带标签的模板字符</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">'zhang3'</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">9</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tag</span>(<span class="params">strArr, ...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">        str += strArr[i] + args[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(strArr, args);</span><br><span class="line"></span><br><span class="line">    str += strArr[strArr.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> str = tag<span class="string">`<span class="subst">$&#123;name&#125;</span>今年<span class="subst">$&#123;age&#125;</span>岁了`</span>；</span><br><span class="line"><span class="built_in">console</span>.info(str);</span><br></pre></td></tr></table></figure>
<ol>
<li>includes 方法</li>
</ol>
<p>判断字符串中是否包含某个字符串<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'xingqitian'</span>；</span><br><span class="line">str.includes(<span class="string">'ti'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></p>
<ol>
<li>endsWidth、startsWith 方法</li>
</ol>
<p>判断字符串是否以某一个字符串开始或结束<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'234567899sddcdhs'</span>;</span><br><span class="line">a.startsWith(<span class="string">'23'</span>);</span><br><span class="line">a.endsWith(<span class="string">'Hs'</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><ol>
<li>函数参数可赋值，可解构</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">&#123;a=<span class="number">5</span>&#125;</span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>箭头函数</li>
</ol>
<ul>
<li>如果参数只有一个，可省略小括号</li>
<li>如果不写return，可以不写大括号</li>
<li>没有arguments变量</li>
<li>不改变this指向</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 求和</span></span><br><span class="line"><span class="keyword">let</span> sum = <span class="function">(<span class="params">a,b</span>)=&gt;</span>a+b;</span><br></pre></td></tr></table></figure>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><ol>
<li>数组新方法</li>
</ol>
<ul>
<li>Array.from(); //将类数组转化成数组</li>
<li>Array.of(); //创建数组</li>
<li>Array.fill();//填充数组</li>
<li>Array.reduce();//传入回调适合处理 临近数组元素</li>
<li>Array.filter();//数组过滤</li>
<li>Array.find();//查找返回值</li>
<li>Array.includes();//判断数组是否有某值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">2</span>,<span class="number">3</span>)   <span class="comment">// [2,3]</span></span><br></pre></td></tr></table></figure>
<h3 id="Class-类"><a href="#Class-类" class="headerlink" title="Class 类"></a>Class 类</h3><ul>
<li>Class 定义类</li>
<li>extends 实现继承</li>
<li>支持静态方法</li>
<li>constructor 构造方法</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/29/cache-replacement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/29/cache-replacement/" itemprop="url">cache-replacement</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-29T16:19:04+08:00">
                2018-03-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="查看缓存"><a href="#查看缓存" class="headerlink" title="查看缓存"></a>查看缓存</h2><ul>
<li>free/top 命令</li>
<li><p>cache memory </p>
<ul>
<li>命令：<code>cat /proc/meminfo</code></li>
<li>读写文件，为了提高读写性能与速度，会将文件在内存中进行缓存，这部分内存就是Cache Memory(缓存内存).即使你的程序运行结束后，Cache Memory也不会自动释放</li>
</ul>
</li>
<li><p>手动释放cache</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span># To free pagecache:</span><br><span class="line">echo 1 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"><span class="meta">#</span># To free dentries and inodes:</span><br><span class="line">echo 2 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"><span class="meta">#</span># To free pagecache, dentries and inodes:</span><br><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看cached里面的内容 linux-ftools</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/bash</span><br><span class="line"></span><br><span class="line">tar xf linux-ftools.tar.gz -C ./</span><br><span class="line">cd linux-ftools/ &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>eg:查看/tmp 目录下缓存了哪些文件, 命令：</p>
<p><code>linux-fincore --pages=false --summarize --only-cached /tmp/*</code></p>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><h2 id="缓存命中"><a href="#缓存命中" class="headerlink" title="缓存命中"></a>缓存命中</h2><h2 id="cache-miss（缓存没命中）"><a href="#cache-miss（缓存没命中）" class="headerlink" title="cache miss（缓存没命中）"></a>cache miss（缓存没命中）</h2><p>把缓存中的就对象踢出，把新的对象加入缓存池。（替换策略，最优的替代策略就是想把缓存中最没用的条目给踢出去，但是未来是不能够被预知的，所以这种策略是不可能实现的）</p>
<h2 id="缓存替换算法"><a href="#缓存替换算法" class="headerlink" title="缓存替换算法"></a>缓存替换算法</h2><h3 id="FIFO"><a href="#FIFO" class="headerlink" title="FIFO"></a>FIFO</h3><p>先进先出</p>
<h3 id="LFU"><a href="#LFU" class="headerlink" title="LFU"></a>LFU</h3><p>最近最少使用算法</p>
<p><code>如果一个数据在最近一段时间内使用次数很少，那么在将来一段时间内被使用的可能性也很小</code></p>
<p>利用一个数组存储 数据项，用hashmap存储每个数据项在数组中对应的位置，然后为每个数据项设计一个访问频次，当数据项被命中时，访问频次自增，在淘汰的时候淘汰访问频次最少的数据</p>
<h3 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h3><p>最近最久未使用</p>
<p><code>如果一个数据在最近一段时间没有被访问到，那么在将来它被访问的可能性也很小</code></p>
<p>当需要插入新的数据项的时候，如果新数据项在链表中存在（一般称为命中），则把该节点移到链表头部，如果不存在，则新建一个节点，放到链表头部，若缓存满了，则把链表最后一个节点删除即可。在访问数据的时候，如果数据项在链表中存在，则把该节点移到链表头部，否则返回-1。这样一来在链表尾部的节点就是最近最久未访问的数据项</p>
<h3 id="LRU-vs-LFU"><a href="#LRU-vs-LFU" class="headerlink" title="LRU vs LFU"></a>LRU vs LFU</h3><ul>
<li>LRU的淘汰规则是基于访问时间</li>
<li>LFU是基于访问次数</li>
</ul>
<p><code>set(2,2),set(1,1),get(2),get(1),get(2),set(3,3),set(4,4)</code><br>LFU 置换(3,3)<br>LRU 置换(1,1)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/26/adblock-plus-blocking-filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lurel">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Laurel Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/26/adblock-plus-blocking-filter/" itemprop="url">adblock-plus-blocking-filter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-26T21:08:32+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="网页内容被adblock-plus插件拦截"><a href="#网页内容被adblock-plus插件拦截" class="headerlink" title="网页内容被adblock plus插件拦截"></a>网页内容被adblock plus插件拦截</h3><p><a href="https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt" target="_blank" rel="noopener">adblock plus chinalist easylist </a></p>
<ul>
<li><p>常规广告拦截过滤规则：</p>
<ul>
<li>包含常见的广告内容js及目录</li>
</ul>
</li>
<li><p>常规网页元素过滤规则:</p>
<ul>
<li>包含常见的广告class、id元素的命名</li>
</ul>
</li>
<li><p>联盟广告过滤规则 Ads-Union:</p>
<ul>
<li>包含常见的联盟广告调用JS和域名，这个过滤规则最恨，几乎涵盖了所有的联盟广告平台</li>
</ul>
</li>
<li><p>弹窗 Popups</p>
<ul>
<li>包含常见的弹窗广告</li>
</ul>
</li>
<li><p>特定广告过滤规则 Specific advert blocking filters</p>
</li>
<li><p>特定元素过滤规则 Specific element hiding rules</p>
<ul>
<li>这个规则将一些网站固定的某个广告位加以过滤</li>
</ul>
</li>
<li><p>CSS样式白名单 CSS Whitelist,包含了一些知名网站的忽略规则</p>
</li>
</ul>
<h3 id="遇见的坑："><a href="#遇见的坑：" class="headerlink" title="遇见的坑："></a>遇见的坑：</h3><p>ff下有类名为icon-advertise的样式被屏蔽掉</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Lurel</p>
              <p class="site-description motion-element" itemprop="description">desc</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">Kategorien</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">Tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lurel</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
